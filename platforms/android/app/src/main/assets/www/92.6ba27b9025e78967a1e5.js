(window.webpackJsonp=window.webpackJsonp||[]).push([[92],{yTQB:function(e,n,t){"use strict";t.r(n),t.d(n,"CoreSiteHomeLazyModule",(function(){return B}));var o=t("tyNb"),i=t("L3Fv"),a=t("5p9q"),c=t("Fjfc"),_=t("mrSG"),r=t("ULAo"),s=t("3LXp"),l=t("9+EE"),g=t("SV+s"),d=t("Xzvb"),m=t("fjkH"),u=t("GBcW"),p=t("yQ+R"),C=t("zbKZ"),f=t("pHTc"),h=t("0NpS"),S=t("bFG1"),I=t("8vmT"),H=t("D7J2"),x=t("fXoL"),P=t("ACV2"),T=t("ofXK"),b=t("nt/U"),v=t("TEn/"),y=t("PgjG"),O=t("ACYt"),E=t("3CSS"),w=t("hMzs"),M=t("1Y1L"),k=t("nEkO"),D=t("aSim"),V=t("r8G5"),F=t("sYmb");function CoreSiteHomeIndexPage_ion_button_1_Template(e,n){if(1&e){const e=x.Fc();x.Ec(0,"ion-button",14),x.Mc("click",(function CoreSiteHomeIndexPage_ion_button_1_Template_ion_button_click_0_listener(){x.fd(e);return x.Oc().openSearch()})),x.Pc(1,"translate"),x.zc(2,"ion-icon",15),x.Dc()}2&e&&x.mc("aria-label",x.Qc(1,1,"core.courses.searchcourses"))}function CoreSiteHomeIndexPage_ng_container_8_ion_item_1_Template(e,n){if(1&e&&(x.Ec(0,"ion-item",18),x.Ec(1,"ion-label"),x.zc(2,"core-format-text",19),x.Dc(),x.Dc()),2&e){const e=x.Oc(2);x.lc(2),x.Vc("text",e.section.summary)("contextInstanceId",e.siteHomeId)}}function CoreSiteHomeIndexPage_ng_container_8_core_course_module_2_Template(e,n){if(1&e&&x.zc(0,"core-course-module",20),2&e){const e=n.$implicit,t=x.Oc(2);x.Vc("module",e)("section",t.section)}}function CoreSiteHomeIndexPage_ng_container_8_Template(e,n){if(1&e&&(x.Cc(0),x.nd(1,CoreSiteHomeIndexPage_ng_container_8_ion_item_1_Template,3,2,"ion-item",16),x.nd(2,CoreSiteHomeIndexPage_ng_container_8_core_course_module_2_Template,1,2,"core-course-module",17),x.Bc()),2&e){const e=x.Oc();x.lc(1),x.Vc("ngIf",e.section.summary),x.lc(1),x.Vc("ngForOf",e.section.modules)}}function CoreSiteHomeIndexPage_ng_container_9_core_spacer_1_Template(e,n){1&e&&x.zc(0,"core-spacer")}function CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_2_1_ng_template_0_Template(e,n){}function CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_2_1_Template(e,n){1&e&&x.nd(0,CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_2_1_ng_template_0_Template,0,0,"ng-template")}function CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_2_Template(e,n){if(1&e&&(x.Cc(0),x.nd(1,CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_2_1_Template,1,0,void 0,24),x.Bc()),2&e){x.Oc(3);const e=x.ed(13);x.lc(1),x.Vc("ngTemplateOutlet",e)}}function CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_3_1_ng_template_0_Template(e,n){}function CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_3_1_Template(e,n){1&e&&x.nd(0,CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_3_1_ng_template_0_Template,0,0,"ng-template")}function CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_3_Template(e,n){if(1&e&&(x.Cc(0),x.nd(1,CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_3_1_Template,1,0,void 0,24),x.Bc()),2&e){x.Oc(3);const e=x.ed(17);x.lc(1),x.Vc("ngTemplateOutlet",e)}}function CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_4_1_ng_template_0_Template(e,n){}function CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_4_1_Template(e,n){1&e&&x.nd(0,CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_4_1_ng_template_0_Template,0,0,"ng-template")}function CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_4_Template(e,n){if(1&e&&(x.Cc(0),x.nd(1,CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_4_1_Template,1,0,void 0,24),x.Bc()),2&e){x.Oc(3);const e=x.ed(21);x.lc(1),x.Vc("ngTemplateOutlet",e)}}function CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_5_1_ng_template_0_Template(e,n){}function CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_5_1_Template(e,n){1&e&&x.nd(0,CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_5_1_ng_template_0_Template,0,0,"ng-template")}function CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_5_Template(e,n){if(1&e&&(x.Cc(0),x.nd(1,CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_5_1_Template,1,0,void 0,24),x.Bc()),2&e){x.Oc(3);const e=x.ed(19);x.lc(1),x.Vc("ngTemplateOutlet",e)}}function CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_6_1_ng_template_0_Template(e,n){}function CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_6_1_Template(e,n){1&e&&x.nd(0,CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_6_1_ng_template_0_Template,0,0,"ng-template")}function CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_6_Template(e,n){if(1&e&&(x.Cc(0),x.nd(1,CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_6_1_Template,1,0,void 0,24),x.Bc()),2&e){x.Oc(3);const e=x.ed(15);x.lc(1),x.Vc("ngTemplateOutlet",e)}}function CoreSiteHomeIndexPage_ng_container_9_ng_container_2_Template(e,n){if(1&e&&(x.Cc(0),x.Cc(1,22),x.nd(2,CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_2_Template,2,1,"ng-container",23),x.nd(3,CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_3_Template,2,1,"ng-container",23),x.nd(4,CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_4_Template,2,1,"ng-container",23),x.nd(5,CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_5_Template,2,1,"ng-container",23),x.nd(6,CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_6_Template,2,1,"ng-container",23),x.Bc(),x.Bc()),2&e){const e=n.$implicit;x.lc(1),x.Vc("ngSwitch",e),x.lc(1),x.Vc("ngSwitchCase","LIST_OF_COURSE"),x.lc(1),x.Vc("ngSwitchCase","LIST_OF_CATEGORIES"),x.lc(1),x.Vc("ngSwitchCase","COURSE_SEARCH_BOX"),x.lc(1),x.Vc("ngSwitchCase","ENROLLED_COURSES"),x.lc(1),x.Vc("ngSwitchCase","NEWS_ITEMS")}}function CoreSiteHomeIndexPage_ng_container_9_Template(e,n){if(1&e&&(x.Cc(0),x.nd(1,CoreSiteHomeIndexPage_ng_container_9_core_spacer_1_Template,1,0,"core-spacer",6),x.nd(2,CoreSiteHomeIndexPage_ng_container_9_ng_container_2_Template,7,6,"ng-container",21),x.Bc()),2&e){const e=x.Oc();x.lc(1),x.Vc("ngIf",e.section&&e.section.hasContent),x.lc(1),x.Vc("ngForOf",e.items)}}function CoreSiteHomeIndexPage_core_block_side_blocks_button_10_Template(e,n){if(1&e&&x.zc(0,"core-block-side-blocks-button",25),2&e){const e=x.Oc();x.Vc("instanceId",e.siteHomeId)}}function CoreSiteHomeIndexPage_core_empty_box_11_Template(e,n){1&e&&(x.zc(0,"core-empty-box",26),x.Pc(1,"translate")),2&e&&x.Vc("message",x.Qc(1,1,"core.course.nocontentavailable"))}function CoreSiteHomeIndexPage_ng_template_12_Template(e,n){if(1&e){const e=x.Fc();x.Ec(0,"ion-card"),x.Ec(1,"ion-item",27),x.Mc("click",(function CoreSiteHomeIndexPage_ng_template_12_Template_ion_item_click_1_listener(){x.fd(e);return x.Oc().openAvailableCourses()})),x.zc(2,"ion-icon",28),x.Ec(3,"ion-label"),x.Ec(4,"p",29),x.pd(5),x.Pc(6,"translate"),x.Dc(),x.Dc(),x.Dc(),x.Dc()}2&e&&(x.lc(5),x.qd(x.Qc(6,1,"core.courses.availablecourses")))}function CoreSiteHomeIndexPage_ng_template_14_core_course_module_0_Template(e,n){if(1&e&&x.zc(0,"core-course-module",31),2&e){const e=x.Oc(2);x.Vc("module",e.newsForumModule)}}function CoreSiteHomeIndexPage_ng_template_14_Template(e,n){if(1&e&&x.nd(0,CoreSiteHomeIndexPage_ng_template_14_core_course_module_0_Template,1,1,"core-course-module",30),2&e){const e=x.Oc();x.Vc("ngIf",e.newsForumModule)}}function CoreSiteHomeIndexPage_ng_template_16_Template(e,n){if(1&e){const e=x.Fc();x.Ec(0,"ion-card"),x.Ec(1,"ion-item",27),x.Mc("click",(function CoreSiteHomeIndexPage_ng_template_16_Template_ion_item_click_1_listener(){x.fd(e);return x.Oc().openCourseCategories()})),x.zc(2,"ion-icon",32),x.Ec(3,"ion-label"),x.Ec(4,"p",29),x.pd(5),x.Pc(6,"translate"),x.Dc(),x.Dc(),x.Dc(),x.Dc()}2&e&&(x.lc(5),x.qd(x.Qc(6,1,"core.courses.categories")))}function CoreSiteHomeIndexPage_ng_template_18_Template(e,n){if(1&e){const e=x.Fc();x.Ec(0,"ion-card"),x.Ec(1,"ion-item",27),x.Mc("click",(function CoreSiteHomeIndexPage_ng_template_18_Template_ion_item_click_1_listener(){x.fd(e);return x.Oc().openMyCourses()})),x.zc(2,"ion-icon",28),x.Ec(3,"ion-label"),x.Ec(4,"p",29),x.pd(5),x.Pc(6,"translate"),x.Dc(),x.Dc(),x.Dc(),x.Dc()}2&e&&(x.lc(5),x.qd(x.Qc(6,1,"core.courses.mycourses")))}function CoreSiteHomeIndexPage_ng_template_20_Template(e,n){if(1&e){const e=x.Fc();x.Ec(0,"ion-card"),x.Ec(1,"ion-item",27),x.Mc("click",(function CoreSiteHomeIndexPage_ng_template_20_Template_ion_item_click_1_listener(){x.fd(e);return x.Oc().openSearch()})),x.zc(2,"ion-icon",33),x.Ec(3,"ion-label"),x.Ec(4,"p",29),x.pd(5),x.Pc(6,"translate"),x.Dc(),x.Dc(),x.Dc(),x.Dc()}2&e&&(x.lc(5),x.qd(x.Qc(6,1,"core.courses.searchcourses")))}let L=(()=>{class CoreSiteHomeIndexPage{constructor(){this.dataLoaded=!1,this.hasContent=!1,this.hasBlocks=!1,this.items=[],this.siteHomeId=1,this.searchEnabled=!1,this.updateSiteObserver=m.b.on(m.b.SITE_UPDATED,(()=>{this.searchEnabled=!d.a.isSearchCoursesDisabledInSite()}),l.b.getCurrentSiteId()),this.logView=I.a.once((()=>Object(_.a)(this,void 0,void 0,(function*(){var e,n;yield S.a.ignoreErrors(r.a.logView(this.siteHomeId)),H.a.logEvent({type:H.b.VIEW_ITEM,ws:"core_course_view_course",name:null!==(n=null===(e=this.currentSite.getInfo())||void 0===e?void 0:e.sitename)&&void 0!==n?n:"",data:{id:this.siteHomeId,category:"course"},url:"/?redirect=0"})}))))}ngOnInit(){this.searchEnabled=!d.a.isSearchCoursesDisabledInSite(),this.currentSite=l.b.getRequiredCurrentSite(),this.siteHomeId=l.b.getCurrentSiteHomeId();const e=f.a.getRouteParam("module");if(e){let n=f.a.getRouteParam("modNavOptions");if(!n){const e=f.a.getRouteParam("modParams");e&&(n={params:e})}u.a.openModule(e,this.siteHomeId,{modNavOptions:n})}this.loadContent().finally((()=>{this.dataLoaded=!0}))}loadContent(){return Object(_.a)(this,void 0,void 0,(function*(){this.hasContent=!1;const e=this.currentSite.getStoredConfig()||{numsections:1,frontpageloggedin:void 0};if(this.items=yield g.a.getFrontPageItems(e.frontpageloggedin),this.hasContent=this.items.length>0,this.items.includes("NEWS_ITEMS"))try{const e=yield g.a.getNewsForum(this.siteHomeId);this.newsForumModule=yield r.a.getModule(e.cmid,e.course),this.newsForumModule.handlerData=yield p.a.getModuleDataFor(this.newsForumModule.modname,this.newsForumModule,this.siteHomeId,void 0,!0)}catch(e){}try{const n=yield r.a.getSections(this.siteHomeId,!1,!0);if(this.section=e.numsections?n.find((e=>1==e.section)):void 0,this.section){const e=yield u.a.addHandlerDataForModules([this.section],this.siteHomeId,void 0,void 0,!0);this.section.hasContent=e.hasContent,this.hasContent=e.hasContent||this.hasContent}this.logView()}catch(e){s.a.showErrorModalDefault(e,"core.course.couldnotloadsectioncontent",!0)}this.hasBlocks=yield h.a.hasCourseBlocks(this.siteHomeId)}))}doRefresh(e){const n=[];n.push(r.a.invalidateSections(this.siteHomeId)),n.push(this.currentSite.invalidateConfig().then((()=>Object(_.a)(this,void 0,void 0,(function*(){const e=yield this.currentSite.getConfig();this.currentSite.setConfig(e)}))))),n.push(r.a.invalidateCourseBlocks(this.siteHomeId)),this.section&&this.section.modules&&n.push(C.a.invalidateModules(this.section.modules,this.siteHomeId)),Promise.all(n).finally((()=>Object(_.a)(this,void 0,void 0,(function*(){yield this.loadContent().finally((()=>{null==e?void 0:e.complete()}))}))))}openSearch(){f.a.navigateToSitePath("courses/list",{params:{mode:"search"}})}openAvailableCourses(){f.a.navigateToSitePath("courses/list",{params:{mode:"all"}})}openMyCourses(){f.a.navigateToSitePath("courses/list",{params:{mode:"my"}})}openCourseCategories(){f.a.navigateToSitePath("courses/categories")}ngOnDestroy(){this.updateSiteObserver.off()}}return CoreSiteHomeIndexPage.ɵfac=function CoreSiteHomeIndexPage_Factory(e){return new(e||CoreSiteHomeIndexPage)},CoreSiteHomeIndexPage.ɵcmp=x.sc({type:CoreSiteHomeIndexPage,selectors:[["page-core-sitehome-index"]],decls:22,vars:10,consts:[["slot","end","prepend",""],[3,"click",4,"ngIf"],["slot","fixed",3,"disabled","ionRefresh"],[3,"pullingText"],[3,"hideUntil"],[1,"core-course-module-list-wrapper"],[4,"ngIf"],["slot","fixed","contextLevel","course",3,"instanceId",4,"ngIf"],["icon","fas-box-open",3,"message",4,"ngIf"],["allCourseList",""],["news",""],["categories",""],["enrolledCourseList",""],["courseSearch",""],[3,"click"],["name","fas-magnifying-glass","slot","icon-only","aria-hidden","true"],["class","ion-text-wrap",4,"ngIf"],[3,"module","section",4,"ngFor","ngForOf"],[1,"ion-text-wrap"],["contextLevel","course",3,"text","contextInstanceId"],[3,"module","section"],[4,"ngFor","ngForOf"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngTemplateOutlet"],["slot","fixed","contextLevel","course",3,"instanceId"],["icon","fas-box-open",3,"message"],["button","",1,"ion-text-wrap",3,"click"],["name","fas-graduation-cap","fixed-width","","slot","start","aria-hidden","true"],[1,"item-heading"],["class","core-sitehome-news",3,"module",4,"ngIf"],[1,"core-sitehome-news",3,"module"],["name","fas-folder","slot","start","aria-hidden","true"],["name","fas-magnifying-glass","slot","start","aria-hidden","true"]],template:function CoreSiteHomeIndexPage_Template(e,n){1&e&&(x.Ec(0,"core-navbar-buttons",0),x.nd(1,CoreSiteHomeIndexPage_ion_button_1_Template,3,3,"ion-button",1),x.Dc(),x.Ec(2,"ion-content"),x.Ec(3,"ion-refresher",2),x.Mc("ionRefresh",(function CoreSiteHomeIndexPage_Template_ion_refresher_ionRefresh_3_listener(e){return n.doRefresh(e.target)})),x.zc(4,"ion-refresher-content",3),x.Pc(5,"translate"),x.Dc(),x.Ec(6,"core-loading",4),x.Ec(7,"ion-list",5),x.nd(8,CoreSiteHomeIndexPage_ng_container_8_Template,3,2,"ng-container",6),x.nd(9,CoreSiteHomeIndexPage_ng_container_9_Template,3,2,"ng-container",6),x.Dc(),x.nd(10,CoreSiteHomeIndexPage_core_block_side_blocks_button_10_Template,1,1,"core-block-side-blocks-button",7),x.nd(11,CoreSiteHomeIndexPage_core_empty_box_11_Template,2,3,"core-empty-box",8),x.Dc(),x.Dc(),x.nd(12,CoreSiteHomeIndexPage_ng_template_12_Template,7,3,"ng-template",null,9,x.od),x.nd(14,CoreSiteHomeIndexPage_ng_template_14_Template,1,1,"ng-template",null,10,x.od),x.nd(16,CoreSiteHomeIndexPage_ng_template_16_Template,7,3,"ng-template",null,11,x.od),x.nd(18,CoreSiteHomeIndexPage_ng_template_18_Template,7,3,"ng-template",null,12,x.od),x.nd(20,CoreSiteHomeIndexPage_ng_template_20_Template,7,3,"ng-template",null,13,x.od)),2&e&&(x.lc(1),x.Vc("ngIf",n.searchEnabled),x.lc(2),x.Vc("disabled",!n.dataLoaded),x.lc(1),x.Wc("pullingText",x.Qc(5,8,"core.pulltorefresh")),x.lc(2),x.Vc("hideUntil",n.dataLoaded),x.lc(2),x.Vc("ngIf",n.section&&n.section.hasContent),x.lc(1),x.Vc("ngIf",n.items.length>0),x.lc(1),x.Vc("ngIf",n.hasBlocks),x.lc(1),x.Vc("ngIf",!n.hasContent))},directives:[P.a,T.t,b.a,v.v,v.bb,v.cb,y.a,v.P,O.a,v.l,v.D,E.a,T.s,v.I,v.O,w.a,M.a,k.a,T.x,T.y,T.A,D.a,V.a,v.n],pipes:[F.d],styles:["ion-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{display:inline-block;border-radius:var(--module-icon-radius);padding:.7rem;background-color:var(--gray-100);color:var(--gray-900);line-height:var(--size);--margin-end:1rem;margin-right:var(--margin-end)}@supports ((-webkit-margin-start:0) or (margin-inline-start:0)) or (-webkit-margin-start:0){ion-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:unset;-webkit-margin-end:var(--margin-end);margin-inline-end:var(--margin-end)}}core-spacer[_ngcontent-%COMP%]{--spacer-horizontal:10px}"]}),CoreSiteHomeIndexPage})();const z=[{path:"",component:L}];let B=(()=>{class CoreSiteHomeLazyModule{}return CoreSiteHomeLazyModule.ɵmod=x.wc({type:CoreSiteHomeLazyModule}),CoreSiteHomeLazyModule.ɵinj=x.vc({factory:function CoreSiteHomeLazyModule_Factory(e){return new(e||CoreSiteHomeLazyModule)},imports:[[o.m.forChild(z),i.a,a.a,c.a],o.m]}),CoreSiteHomeLazyModule})();void(("undefined"==typeof ngJitMode||ngJitMode)&&x.kd(B,{declarations:[L],imports:[o.m,i.a,a.a,c.a],exports:[o.m]}))}}]);