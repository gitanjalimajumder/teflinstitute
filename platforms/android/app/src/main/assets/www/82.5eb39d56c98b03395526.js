(window.webpackJsonp=window.webpackJsonp||[]).push([[82],{BKyk:function(e,r,o){"use strict";o.r(r),o.d(r,"CoreGradesCoursesLazyModule",(function(){return z}));var s=o("tyNb"),t=o("vY5A"),a=o("Y+03"),c=o("L3Fv"),n=o("wxbA"),i=o("OzlW"),d=o("mrSG"),l=o("EoRH"),u=o("baaQ"),_=o("46ml"),g=o("q5/S"),C=o("wo9T"),p=o("D7J2"),m=o("9+EE"),f=o("3LXp"),h=o("bFG1"),b=o("j3ag"),y=o("fXoL"),G=o("TEn/"),v=o("nt/U"),P=o("PgjG"),w=o("ofXK"),E=o("r8G5"),I=o("hMzs"),x=o("sYmb");function CoreGradesCoursesPage_core_empty_box_15_Template(e,r){1&e&&(y.zc(0,"core-empty-box",7),y.Pc(1,"translate")),2&e&&y.Vc("message",y.Qc(1,1,"core.grades.nogradesreturned"))}function CoreGradesCoursesPage_ion_list_16_ion_item_1_span_4_Template(e,r){1&e&&(y.Ec(0,"span",13),y.pd(1),y.Pc(2,"translate"),y.Dc()),2&e&&(y.lc(1),y.rd(" ",y.Qc(2,1,"core.grades.grade")," "))}function CoreGradesCoursesPage_ion_list_16_ion_item_1_Template(e,r){if(1&e){const e=y.Fc();y.Ec(0,"ion-item",9),y.Mc("click",(function CoreGradesCoursesPage_ion_list_16_ion_item_1_Template_ion_item_click_0_listener(){y.fd(e);const o=r.$implicit;return y.Oc(2).courses.select(o)})),y.Ec(1,"ion-label"),y.zc(2,"core-format-text",10),y.Dc(),y.Ec(3,"ion-badge",11),y.nd(4,CoreGradesCoursesPage_ion_list_16_ion_item_1_span_4_Template,3,3,"span",12),y.pd(5),y.Dc(),y.Dc()}if(2&e){const e=r.$implicit,o=y.Oc(2);y.mc("aria-label",e.courseFullName)("aria-current",o.courses.getItemAriaCurrent(e)),y.lc(2),y.Vc("text",e.courseFullName)("contextInstanceId",e.courseid),y.lc(2),y.Vc("ngIf",e.grade&&"-"!=e.grade),y.lc(1),y.rd(" ",e.grade," ")}}function CoreGradesCoursesPage_ion_list_16_Template(e,r){if(1&e&&(y.Ec(0,"ion-list"),y.nd(1,CoreGradesCoursesPage_ion_list_16_ion_item_1_Template,6,6,"ion-item",8),y.Dc()),2&e){const e=y.Oc();y.lc(1),y.Vc("ngForOf",e.courses.items)}}let D=(()=>{class CoreGradesCoursesPage{constructor(){const e=u.a.getOrCreateSource(g.a,[]);this.courses=new courses_CoreGradesCoursesManager(e,CoreGradesCoursesPage)}ngAfterViewInit(){return Object(d.a)(this,void 0,void 0,(function*(){yield this.fetchInitialCourses(),this.courses.start(this.splitView)}))}ngOnDestroy(){this.courses.destroy()}refreshCourses(e){return Object(d.a)(this,void 0,void 0,(function*(){yield h.a.ignoreErrors(C.a.invalidateCoursesGradesData()),yield h.a.ignoreErrors(this.courses.reload()),null==e||e.complete()}))}fetchInitialCourses(){return Object(d.a)(this,void 0,void 0,(function*(){try{yield this.courses.load()}catch(e){f.a.showErrorModalDefault(e,"Error loading courses")}}))}}return CoreGradesCoursesPage.ɵfac=function CoreGradesCoursesPage_Factory(e){return new(e||CoreGradesCoursesPage)},CoreGradesCoursesPage.ɵcmp=y.sc({type:CoreGradesCoursesPage,selectors:[["page-core-grades-courses"]],viewQuery:function CoreGradesCoursesPage_Query(e,r){var o;(1&e&&y.ud(_.a,!0),2&e)&&(y.dd(o=y.Nc())&&(r.splitView=o.first))},decls:17,vars:13,consts:[["slot","start"],[3,"text"],["slot","fixed",3,"disabled","ionRefresh"],[3,"pullingText"],[3,"hideUntil"],["icon","fas-chart-bar",3,"message",4,"ngIf"],[4,"ngIf"],["icon","fas-chart-bar",3,"message"],["class","ion-text-wrap","button","","detail","true",3,"click",4,"ngFor","ngForOf"],["button","","detail","true",1,"ion-text-wrap",3,"click"],["contextLevel","course",3,"text","contextInstanceId"],["slot","end","color","light"],["class","sr-only",4,"ngIf"],[1,"sr-only"]],template:function CoreGradesCoursesPage_Template(e,r){1&e&&(y.Ec(0,"ion-header"),y.Ec(1,"ion-toolbar"),y.Ec(2,"ion-buttons",0),y.zc(3,"ion-back-button",1),y.Pc(4,"translate"),y.Dc(),y.Ec(5,"ion-title"),y.Ec(6,"h1"),y.pd(7),y.Pc(8,"translate"),y.Dc(),y.Dc(),y.Dc(),y.Dc(),y.Ec(9,"ion-content"),y.Ec(10,"core-split-view"),y.Ec(11,"ion-refresher",2),y.Mc("ionRefresh",(function CoreGradesCoursesPage_Template_ion_refresher_ionRefresh_11_listener(e){return r.refreshCourses(e.target)})),y.zc(12,"ion-refresher-content",3),y.Pc(13,"translate"),y.Dc(),y.Ec(14,"core-loading",4),y.nd(15,CoreGradesCoursesPage_core_empty_box_15_Template,2,3,"core-empty-box",5),y.nd(16,CoreGradesCoursesPage_ion_list_16_Template,2,1,"ion-list",6),y.Dc(),y.Dc(),y.Dc()),2&e&&(y.lc(3),y.Vc("text",y.Qc(4,7,"core.back")),y.lc(4),y.qd(y.Qc(8,9,"core.grades.grades")),y.lc(4),y.Vc("disabled",!r.courses.loaded),y.lc(1),y.Wc("pullingText",y.Qc(13,11,"core.pulltorefresh")),y.lc(2),y.Vc("hideUntil",r.courses.loaded),y.lc(1),y.Vc("ngIf",r.courses.empty),y.lc(1),y.Vc("ngIf",!r.courses.empty))},directives:[G.C,G.Ab,G.m,G.h,G.i,G.yb,v.a,G.v,_.a,G.bb,G.cb,P.a,w.t,E.a,G.P,w.s,G.I,G.O,I.a,G.k],pipes:[x.d],encapsulation:2}),CoreGradesCoursesPage})();class courses_CoreGradesCoursesManager extends l.a{logActivity(){return Object(d.a)(this,void 0,void 0,(function*(){yield C.a.logCoursesGradesView(),p.a.logEvent({type:p.b.VIEW_ITEM_LIST,ws:"gradereport_overview_view_grade_report",name:b.I.instant("core.grades.grades"),data:{courseId:m.b.getCurrentSiteHomeId(),category:"grades"},url:"/grade/report/overview/index.php"})}))}}const M=[{path:"",component:D},{path:":courseId",component:n.a}],T=[{path:"",component:D,children:[{path:":courseId",component:n.a}]}],O=[...Object(t.c)(M,(()=>a.a.isMobile)),...Object(t.c)(T,(()=>a.a.isTablet))];let z=(()=>{class CoreGradesCoursesLazyModule{}return CoreGradesCoursesLazyModule.ɵmod=y.wc({type:CoreGradesCoursesLazyModule}),CoreGradesCoursesLazyModule.ɵinj=y.vc({factory:function CoreGradesCoursesLazyModule_Factory(e){return new(e||CoreGradesCoursesLazyModule)},imports:[[s.m.forChild(O),c.a,i.a]]}),CoreGradesCoursesLazyModule})();void(("undefined"==typeof ngJitMode||ngJitMode)&&y.kd(z,{declarations:[D],imports:[s.m,c.a,i.a]}))}}]);