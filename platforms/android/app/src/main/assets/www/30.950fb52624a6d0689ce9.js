(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{DiTn:function(e,t,n){"use strict";n.r(t),n.d(t,"AddonModWorkshopAssessmentStrategyAccumulativeHandlerLazyService",(function(){return a})),n.d(t,"AddonModWorkshopAssessmentStrategyAccumulativeHandler",(function(){return _}));var o=n("mrSG"),s=n("FvYb"),c=n("j3ag"),r=n("RHeU"),d=n("PFCz"),i=n("fXoL");let a=(()=>{class AddonModWorkshopAssessmentStrategyAccumulativeHandlerLazyService extends d.a{isEnabled(){return Object(o.a)(this,void 0,void 0,(function*(){return!0}))}getComponent(){return r.a}getOriginalValues(e){return Object(o.a)(this,void 0,void 0,(function*(){const t=c.I.instant("core.choosedots"),n=[],o=[];return e.fields.forEach(((r,d)=>{r.dimtitle=c.I.instant("addon.mod_workshop_assessment_accumulative.dimensionnumber",{$a:r.number}),e.current[d]||(e.current[d]={}),n[d]={},n[d].peercomment=e.current[d].peercomment||"",n[d].number=r.number,e.current[d].grade=e.current[d].grade?parseInt(String(e.current[d].grade),10):-1;const i=parseInt(String(r.grade),10),a=e.dimensionsinfo.find((e=>e.id==parseInt(r.dimensionid,10)));o.push(s.a.makeGradesMenu(i,void 0,t,-1,a&&i<0?a.scale:void 0).then((t=>{r.grades=t,n[d].grade=e.current[d].grade})))})),yield Promise.all(o),n}))}hasDataChanged(e,t){for(const n in e){if(e[n].grade!=t[n].grade)return!0;if(e[n].peercomment!=t[n].peercomment)return!0}return!1}prepareAssessmentData(e,t){return Object(o.a)(this,void 0,void 0,(function*(){const n={},o={};let s=!1;if(t.fields.forEach(((r,d)=>{var i;if(d<t.dimenssionscount){const a=parseInt(String(e[d].grade),10);!isNaN(a)&&a>=0?n["grade__idx_"+d]=a:(o["grade_"+d]=c.I.instant("addon.mod_workshop_assessment_accumulative.mustchoosegrade"),s=!0),n["peercomment__idx_"+d]=null!==(i=e[d].peercomment)&&void 0!==i?i:"",n["gradeid__idx_"+d]=parseInt(t.current[d].gradeid,10)||0,n["dimensionid__idx_"+d]=parseInt(r.dimensionid,10),n["weight__idx_"+d]=parseInt(r.weight,10)||0}})),s)throw o;return n}))}}return AddonModWorkshopAssessmentStrategyAccumulativeHandlerLazyService.ɵfac=function AddonModWorkshopAssessmentStrategyAccumulativeHandlerLazyService_Factory(e){return m(e||AddonModWorkshopAssessmentStrategyAccumulativeHandlerLazyService)},AddonModWorkshopAssessmentStrategyAccumulativeHandlerLazyService.ɵprov=i.uc({token:AddonModWorkshopAssessmentStrategyAccumulativeHandlerLazyService,factory:AddonModWorkshopAssessmentStrategyAccumulativeHandlerLazyService.ɵfac,providedIn:"root"}),AddonModWorkshopAssessmentStrategyAccumulativeHandlerLazyService})();const m=i.Gc(a),_=Object(c.M)(a)},JatN:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var o=n("fXoL");let s=(()=>{class AddonModWorkshopAssessmentStrategyBaseComponent{}return AddonModWorkshopAssessmentStrategyBaseComponent.ɵfac=function AddonModWorkshopAssessmentStrategyBaseComponent_Factory(e){return new(e||AddonModWorkshopAssessmentStrategyBaseComponent)},AddonModWorkshopAssessmentStrategyBaseComponent.ɵcmp=o.sc({type:AddonModWorkshopAssessmentStrategyBaseComponent,selectors:[["ng-component"]],inputs:{workshopId:"workshopId",assessment:"assessment",edit:"edit",selectedValues:"selectedValues",fieldErrors:"fieldErrors",strategy:"strategy",moduleId:"moduleId",courseId:"courseId"},decls:0,vars:0,template:function AddonModWorkshopAssessmentStrategyBaseComponent_Template(e,t){},encapsulation:2}),AddonModWorkshopAssessmentStrategyBaseComponent})()},RHeU:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var o=n("JatN"),s=n("fXoL"),c=n("ofXK"),r=n("TEn/"),d=n("hMzs"),i=n("FasJ"),a=n("3Pt+"),m=n("FTxb"),_=n("d0nH"),l=n("sYmb");function AddonModWorkshopAssessmentStrategyAccumulativeComponent_section_0_ion_card_1_ion_item_6_ion_select_option_8_Template(e,t){if(1&e&&(s.Ec(0,"ion-select-option",10),s.pd(1),s.Dc()),2&e){const e=t.$implicit;s.Vc("value",e.value),s.lc(1),s.qd(e.label)}}function AddonModWorkshopAssessmentStrategyAccumulativeComponent_section_0_ion_card_1_ion_item_6_core_input_errors_9_Template(e,t){if(1&e&&s.zc(0,"core-input-errors",11),2&e){const e=s.Oc(3).index,t=s.Oc();s.Vc("errorText",t.fieldErrors["grade_"+e])}}const _c0=function(e){return{$a:e}},_c1=function(e){return{header:e}};function AddonModWorkshopAssessmentStrategyAccumulativeComponent_section_0_ion_card_1_ion_item_6_Template(e,t){if(1&e){const e=s.Fc();s.Ec(0,"ion-item"),s.Ec(1,"ion-label",5),s.Ec(2,"span",6),s.pd(3),s.Pc(4,"translate"),s.Dc(),s.Dc(),s.Ec(5,"ion-select",7),s.Mc("ngModelChange",(function AddonModWorkshopAssessmentStrategyAccumulativeComponent_section_0_ion_card_1_ion_item_6_Template_ion_select_ngModelChange_5_listener(t){s.fd(e);const n=s.Oc(2).index;return s.Oc().selectedValues[n].grade=t})),s.Pc(6,"translate"),s.Pc(7,"translate"),s.nd(8,AddonModWorkshopAssessmentStrategyAccumulativeComponent_section_0_ion_card_1_ion_item_6_ion_select_option_8_Template,2,2,"ion-select-option",8),s.Dc(),s.nd(9,AddonModWorkshopAssessmentStrategyAccumulativeComponent_section_0_ion_card_1_ion_item_6_core_input_errors_9_Template,1,1,"core-input-errors",9),s.Dc()}if(2&e){const e=s.Oc(2),t=e.$implicit,n=e.index,o=s.Oc();s.lc(2),s.Vc("core-mark-required",!0),s.lc(1),s.rd(" ",s.Rc(4,7,"addon.mod_workshop_assessment_accumulative.dimensiongradefor",s.ad(15,_c0,t.dimtitle))," "),s.lc(2),s.Vc("interfaceOptions",s.ad(19,_c1,s.Rc(6,10,"addon.mod_workshop_assessment_accumulative.dimensiongradefor",s.ad(17,_c0,t.dimtitle))))("ngModel",o.selectedValues[n].grade)("cancelText",s.Qc(7,13,"core.cancel")),s.lc(3),s.Vc("ngForOf",t.grades),s.lc(1),s.Vc("ngIf",o.fieldErrors["grade_"+n])}}function AddonModWorkshopAssessmentStrategyAccumulativeComponent_section_0_ion_card_1_ion_item_7_ng_container_5_p_1_Template(e,t){if(1&e&&(s.Ec(0,"p"),s.pd(1),s.Dc()),2&e){const e=s.Oc().$implicit;s.lc(1),s.qd(e.label)}}function AddonModWorkshopAssessmentStrategyAccumulativeComponent_section_0_ion_card_1_ion_item_7_ng_container_5_Template(e,t){if(1&e&&(s.Cc(0),s.nd(1,AddonModWorkshopAssessmentStrategyAccumulativeComponent_section_0_ion_card_1_ion_item_7_ng_container_5_p_1_Template,2,1,"p",1),s.Bc()),2&e){const e=t.$implicit,n=s.Oc(3).index,o=s.Oc();s.lc(1),s.Vc("ngIf",e.value===o.selectedValues[n].grade)}}function AddonModWorkshopAssessmentStrategyAccumulativeComponent_section_0_ion_card_1_ion_item_7_Template(e,t){if(1&e&&(s.Ec(0,"ion-item",2),s.Ec(1,"ion-label"),s.Ec(2,"p",12),s.pd(3),s.Pc(4,"translate"),s.Dc(),s.nd(5,AddonModWorkshopAssessmentStrategyAccumulativeComponent_section_0_ion_card_1_ion_item_7_ng_container_5_Template,2,1,"ng-container",0),s.Dc(),s.Dc()),2&e){const e=s.Oc(2).$implicit;s.lc(3),s.qd(s.Rc(4,2,"addon.mod_workshop_assessment_accumulative.dimensiongradefor",s.ad(5,_c0,e.dimtitle))),s.lc(2),s.Vc("ngForOf",e.grades)}}function AddonModWorkshopAssessmentStrategyAccumulativeComponent_section_0_ion_card_1_ion_item_8_Template(e,t){if(1&e){const e=s.Fc();s.Ec(0,"ion-item"),s.Ec(1,"ion-label",5),s.pd(2),s.Pc(3,"translate"),s.Dc(),s.Ec(4,"ion-textarea",13),s.Mc("ngModelChange",(function AddonModWorkshopAssessmentStrategyAccumulativeComponent_section_0_ion_card_1_ion_item_8_Template_ion_textarea_ngModelChange_4_listener(t){s.fd(e);const n=s.Oc(2).index;return s.Oc().selectedValues[n].peercomment=t})),s.Dc(),s.Dc()}if(2&e){const e=s.Oc(2),t=e.$implicit,n=e.index,o=s.Oc();s.lc(2),s.rd(" ",s.Rc(3,3,"addon.mod_workshop_assessment_accumulative.dimensioncommentfor",s.ad(6,_c0,t.dimtitle))," "),s.lc(2),s.Vc("ngModel",o.selectedValues[n].peercomment)("core-auto-rows",o.selectedValues[n].peercomment)}}function AddonModWorkshopAssessmentStrategyAccumulativeComponent_section_0_ion_card_1_ion_item_9_Template(e,t){if(1&e&&(s.Ec(0,"ion-item",2),s.Ec(1,"ion-label"),s.Ec(2,"p",12),s.pd(3),s.Pc(4,"translate"),s.Dc(),s.Ec(5,"p"),s.zc(6,"core-format-text",3),s.Dc(),s.Dc(),s.Dc()),2&e){const e=s.Oc(2),t=e.$implicit,n=e.index,o=s.Oc();s.lc(3),s.rd(" ",s.Rc(4,4,"addon.mod_workshop_assessment_accumulative.dimensioncommentfor",s.ad(7,_c0,t.dimtitle))," "),s.lc(3),s.Vc("text",o.selectedValues[n].peercomment)("contextInstanceId",o.moduleId)("courseId",o.courseId)}}function AddonModWorkshopAssessmentStrategyAccumulativeComponent_section_0_ion_card_1_Template(e,t){if(1&e&&(s.Ec(0,"ion-card"),s.Ec(1,"ion-item",2),s.Ec(2,"ion-label"),s.Ec(3,"h2"),s.pd(4),s.Dc(),s.zc(5,"core-format-text",3),s.Dc(),s.Dc(),s.nd(6,AddonModWorkshopAssessmentStrategyAccumulativeComponent_section_0_ion_card_1_ion_item_6_Template,10,21,"ion-item",1),s.nd(7,AddonModWorkshopAssessmentStrategyAccumulativeComponent_section_0_ion_card_1_ion_item_7_Template,6,7,"ion-item",4),s.nd(8,AddonModWorkshopAssessmentStrategyAccumulativeComponent_section_0_ion_card_1_ion_item_8_Template,5,8,"ion-item",1),s.nd(9,AddonModWorkshopAssessmentStrategyAccumulativeComponent_section_0_ion_card_1_ion_item_9_Template,7,9,"ion-item",4),s.Dc()),2&e){const e=s.Oc().$implicit,t=s.Oc();s.lc(4),s.qd(e.dimtitle),s.lc(1),s.Vc("text",e.description)("contextInstanceId",t.moduleId)("courseId",t.courseId),s.lc(1),s.Vc("ngIf",t.edit&&e.grades),s.lc(1),s.Vc("ngIf",!t.edit&&e.grades),s.lc(1),s.Vc("ngIf",t.edit),s.lc(1),s.Vc("ngIf",!t.edit)}}function AddonModWorkshopAssessmentStrategyAccumulativeComponent_section_0_Template(e,t){if(1&e&&(s.Ec(0,"section"),s.nd(1,AddonModWorkshopAssessmentStrategyAccumulativeComponent_section_0_ion_card_1_Template,10,8,"ion-card",1),s.Dc()),2&e){const e=t.index,n=s.Oc();s.lc(1),s.Vc("ngIf",e<(null==n.assessment.form?null:n.assessment.form.dimenssionscount))}}let u=(()=>{class AddonModWorkshopAssessmentStrategyAccumulativeComponent extends o.a{}return AddonModWorkshopAssessmentStrategyAccumulativeComponent.ɵfac=function AddonModWorkshopAssessmentStrategyAccumulativeComponent_Factory(e){return p(e||AddonModWorkshopAssessmentStrategyAccumulativeComponent)},AddonModWorkshopAssessmentStrategyAccumulativeComponent.ɵcmp=s.sc({type:AddonModWorkshopAssessmentStrategyAccumulativeComponent,selectors:[["addon-mod-workshop-assessment-strategy-accumulative"]],features:[s.ic],decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"ion-text-wrap"],["contextLevel","module",3,"text","contextInstanceId","courseId"],["class","ion-text-wrap",4,"ngIf"],["position","stacked"],[3,"core-mark-required"],["interface","action-sheet",3,"interfaceOptions","ngModel","cancelText","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"errorText",4,"ngIf"],[3,"value"],[3,"errorText"],[1,"item-heading"],[3,"ngModel","core-auto-rows","ngModelChange"]],template:function AddonModWorkshopAssessmentStrategyAccumulativeComponent_Template(e,t){1&e&&s.nd(0,AddonModWorkshopAssessmentStrategyAccumulativeComponent_section_0_Template,2,1,"section",0),2&e&&s.Vc("ngForOf",null==t.assessment.form?null:t.assessment.form.fields)},directives:[c.s,c.t,r.n,r.I,r.O,d.a,i.a,r.lb,r.Ob,a.r,a.u,r.mb,m.a,r.wb,r.Pb,_.a],pipes:[l.d],encapsulation:2}),AddonModWorkshopAssessmentStrategyAccumulativeComponent})();const p=s.Gc(u)}}]);