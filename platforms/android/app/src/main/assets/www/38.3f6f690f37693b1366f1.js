(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{eJtl:function(e,t,n){"use strict";n.r(t),n.d(t,"AddonModFeedbackLazyModule",(function(){return me}));var o=n("tyNb"),c=n("L3Fv"),a=n("1IpS"),i=n("ghUQ"),d=n("pHTc"),r=n("hYz8"),_=n("fXoL"),s=n("TEn/"),l=n("4JiN"),m=n("hMzs"),g=n("nt/U"),p=n("sYmb");let u=(()=>{class AddonModFeedbackIndexPage extends i.a{ngOnInit(){super.ngOnInit(),this.selectedTab=d.a.getRouteParam("tab"),this.selectedGroup=d.a.getRouteNumberParam("group")}}return AddonModFeedbackIndexPage.ɵfac=function AddonModFeedbackIndexPage_Factory(e){return f(e||AddonModFeedbackIndexPage)},AddonModFeedbackIndexPage.ɵcmp=_.sc({type:AddonModFeedbackIndexPage,selectors:[["page-addon-mod-feedback-index"]],viewQuery:function AddonModFeedbackIndexPage_Query(e,t){var n;(1&e&&_.ud(r.a,!0),2&e)&&(_.dd(n=_.Nc())&&(t.activityComponent=n.first))},features:[_.ic],decls:14,vars:14,consts:[["collapsible",""],["slot","start"],[3,"text"],["contextLevel","module",3,"text","contextInstanceId","courseId"],["slot","end"],[1,"limited-width"],["slot","fixed",3,"disabled","ionRefresh"],[3,"pullingText"],[3,"module","courseId","group","tab","dataRetrieved"]],template:function AddonModFeedbackIndexPage_Template(e,t){1&e&&(_.Ec(0,"ion-header",0),_.Ec(1,"ion-toolbar"),_.Ec(2,"ion-buttons",1),_.zc(3,"ion-back-button",2),_.Pc(4,"translate"),_.Dc(),_.Ec(5,"ion-title"),_.Ec(6,"h1"),_.zc(7,"core-format-text",3),_.Dc(),_.Dc(),_.zc(8,"ion-buttons",4),_.Dc(),_.Dc(),_.Ec(9,"ion-content",5),_.Ec(10,"ion-refresher",6),_.Mc("ionRefresh",(function AddonModFeedbackIndexPage_Template_ion_refresher_ionRefresh_10_listener(e){return null==t.activityComponent?null:t.activityComponent.doRefresh(e.target)})),_.zc(11,"ion-refresher-content",7),_.Pc(12,"translate"),_.Dc(),_.Ec(13,"addon-mod-feedback-index",8),_.Mc("dataRetrieved",(function AddonModFeedbackIndexPage_Template_addon_mod_feedback_index_dataRetrieved_13_listener(e){return t.updateData(e)})),_.Dc(),_.Dc()),2&e&&(_.lc(3),_.Vc("text",_.Qc(4,10,"core.back")),_.lc(4),_.Vc("text",t.title)("contextInstanceId",null==t.module?null:t.module.id)("courseId",t.courseId),_.lc(3),_.Vc("disabled",null==t.activityComponent?null:t.activityComponent.showLoading),_.lc(1),_.Wc("pullingText",_.Qc(12,12,"core.pulltorefresh")),_.lc(2),_.Vc("module",t.module)("courseId",t.courseId)("group",t.selectedGroup)("tab",t.selectedTab))},directives:[s.C,l.b,s.Ab,s.m,s.h,s.i,s.yb,m.a,g.a,s.v,s.bb,s.cb,r.a],pipes:[p.d],encapsulation:2}),AddonModFeedbackIndexPage})();const f=_.Gc(u);var h=n("mrSG"),b=n("baaQ"),k=n("EoRH"),I=n("FYaz"),F=n("46ml"),A=n("3LXp"),M=n("bFG1"),P=n("CvRw"),v=n("mWdr"),y=n("MNPK"),T=n("96hm");class feedback_attempts_source_AddonModFeedbackAttemptsSource extends P.a{constructor(e,t){super(),this.COURSE_ID=e,this.CM_ID=t}getItemPath(e){return e.id.toString()}getPagesLoaded(){if(!this.identifiable||!this.anonymous)return 0;const e=this.getPageLength();return Math.ceil(Math.max(this.anonymous.length,this.identifiable.length)/e)}isIdentifiableAttempt(e){return"fullname"in e}isAnonymousAttempt(e){return"number"in e}invalidateCache(){return Object(h.a)(this,void 0,void 0,(function*(){yield Promise.all([v.a.invalidateActivityGroupInfo(this.CM_ID),this.feedback&&y.a.invalidateResponsesAnalysisData(this.feedback.id)])}))}loadFeedback(){return Object(h.a)(this,void 0,void 0,(function*(){this.feedback=yield y.a.getFeedback(this.COURSE_ID,this.CM_ID),this.groupInfo=yield v.a.getActivityGroupInfo(this.CM_ID),this.selectedGroup=v.a.validateGroupId(this.selectedGroup,this.groupInfo)}))}getPageLength(){return y.b.PER_PAGE}loadPageItems(e){return Object(h.a)(this,void 0,void 0,(function*(){if(!this.feedback)throw new Error("Can't load attempts without feeback");const t=yield T.a.getResponsesAnalysis(this.feedback.id,{page:e,groupId:this.selectedGroup,cmId:this.CM_ID});0===e&&(this.identifiableTotal=t.totalattempts,this.anonymousTotal=t.totalanonattempts);const n=this.getPageLength()*(e+1);return{items:[...0===e||t.totalattempts>y.b.PER_PAGE?t.attempts:[],...0===e||t.totalanonattempts>y.b.PER_PAGE?t.anonattempts:[]],hasMoreItems:t.totalattempts>n||t.totalanonattempts>n}}))}setItems(e,t){this.identifiable=e.filter(this.isIdentifiableAttempt),this.anonymous=e.filter(this.isAnonymousAttempt),super.setItems(this.identifiable.concat(this.anonymous),t)}}var E=n("8vmT"),D=n("D7J2"),x=n("PgjG"),O=n("WPIK"),w=n("ofXK"),V=n("xpMl"),C=n("FeAf"),R=n("uYHD");function AddonModFeedbackAttemptsPage_ng_container_17_ion_item_6_p_5_Template(e,t){if(1&e&&(_.Ec(0,"p"),_.pd(1),_.Pc(2,"coreFormatDate"),_.Dc()),2&e){const e=_.Oc().$implicit;_.lc(1),_.qd(_.Qc(2,1,1e3*e.timemodified))}}function AddonModFeedbackAttemptsPage_ng_container_17_ion_item_6_Template(e,t){if(1&e){const e=_.Fc();_.Ec(0,"ion-item",10),_.Mc("click",(function AddonModFeedbackAttemptsPage_ng_container_17_ion_item_6_Template_ion_item_click_0_listener(){_.fd(e);const n=t.$implicit,o=_.Oc(2);return null==o.attempts?null:o.attempts.select(n)})),_.zc(1,"core-user-avatar",11),_.Ec(2,"ion-label"),_.Ec(3,"p",12),_.pd(4),_.Dc(),_.nd(5,AddonModFeedbackAttemptsPage_ng_container_17_ion_item_6_p_5_Template,3,3,"p",7),_.Dc(),_.Dc()}if(2&e){const e=t.$implicit,n=_.Oc(2);_.mc("aria-current",null==n.attempts?null:n.attempts.getItemAriaCurrent(e)),_.lc(1),_.Vc("user",e)("linkProfile",!1),_.lc(3),_.qd(e.fullname),_.lc(1),_.Vc("ngIf",e.timemodified)}}const _c0=function(e){return{$a:e}};function AddonModFeedbackAttemptsPage_ng_container_17_Template(e,t){if(1&e&&(_.Cc(0),_.Ec(1,"ion-item-divider"),_.Ec(2,"ion-label"),_.Ec(3,"h2"),_.pd(4),_.Pc(5,"translate"),_.Dc(),_.Dc(),_.Dc(),_.nd(6,AddonModFeedbackAttemptsPage_ng_container_17_ion_item_6_Template,6,5,"ion-item",9),_.Bc()),2&e){const e=_.Oc();_.lc(4),_.qd(_.Rc(5,2,"addon.mod_feedback.non_anonymous_entries",_.ad(5,_c0,e.identifiableAttemptsTotal))),_.lc(2),_.Vc("ngForOf",e.identifiableAttempts)}}function AddonModFeedbackAttemptsPage_ng_container_18_ion_item_6_Template(e,t){if(1&e){const e=_.Fc();_.Ec(0,"ion-item",10),_.Mc("click",(function AddonModFeedbackAttemptsPage_ng_container_18_ion_item_6_Template_ion_item_click_0_listener(){_.fd(e);const n=t.$implicit,o=_.Oc(2);return null==o.attempts?null:o.attempts.select(n)})),_.zc(1,"core-user-avatar",13),_.Ec(2,"ion-label"),_.Ec(3,"p",12),_.pd(4),_.Pc(5,"translate"),_.Dc(),_.Ec(6,"p"),_.pd(7),_.Pc(8,"translate"),_.Dc(),_.Dc(),_.Dc()}if(2&e){const e=t.$implicit,n=_.Oc(2);_.mc("aria-current",null==n.attempts?null:n.attempts.getItemAriaCurrent(e)),_.lc(1),_.Vc("linkProfile",!1),_.lc(3),_.qd(_.Qc(5,5,"addon.mod_feedback.anonymous_user")),_.lc(3),_.sd("",_.Qc(8,7,"addon.mod_feedback.response_nr"),": ",e.number,"")}}function AddonModFeedbackAttemptsPage_ng_container_18_Template(e,t){if(1&e&&(_.Cc(0),_.Ec(1,"ion-item-divider"),_.Ec(2,"ion-label"),_.Ec(3,"h2"),_.pd(4),_.Pc(5,"translate"),_.Dc(),_.Dc(),_.Dc(),_.nd(6,AddonModFeedbackAttemptsPage_ng_container_18_ion_item_6_Template,9,9,"ion-item",9),_.Bc()),2&e){const e=_.Oc();_.lc(4),_.qd(_.Rc(5,2,"addon.mod_feedback.anonymous_entries",_.ad(5,_c0,e.anonymousAttemptsTotal))),_.lc(2),_.Vc("ngForOf",e.anonymousAttempts)}}let N=(()=>{class AddonModFeedbackAttemptsPage{constructor(e){this.route=e,this.fetchFailed=!1,this.promisedAttempts=new I.a,this.logView=E.a.once((()=>{var e;const t=null===(e=this.attempts)||void 0===e?void 0:e.getSource();t&&t.feedback&&D.a.logEvent({type:D.b.VIEW_ITEM_LIST,ws:"mod_feedback_get_responses_analysis",name:t.feedback.name,data:{feedbackid:t.feedback.id,category:"feedback"},url:`/mod/feedback/show_entries.php?id=${t.CM_ID}`})}))}get attempts(){return this.promisedAttempts.value}get groupInfo(){var e;return null===(e=this.attempts)||void 0===e?void 0:e.getSource().groupInfo}get selectedGroup(){var e;return null===(e=this.attempts)||void 0===e?void 0:e.getSource().selectedGroup}set selectedGroup(e){this.attempts&&(this.attempts.getSource().selectedGroup=e,this.attempts.getSource().setDirty(!0))}get identifiableAttempts(){var e,t;return null!==(t=null===(e=this.attempts)||void 0===e?void 0:e.getSource().identifiable)&&void 0!==t?t:[]}get identifiableAttemptsTotal(){var e,t;return null!==(t=null===(e=this.attempts)||void 0===e?void 0:e.getSource().identifiableTotal)&&void 0!==t?t:0}get anonymousAttempts(){var e,t;return null!==(t=null===(e=this.attempts)||void 0===e?void 0:e.getSource().anonymous)&&void 0!==t?t:[]}get anonymousAttemptsTotal(){var e,t;return null!==(t=null===(e=this.attempts)||void 0===e?void 0:e.getSource().anonymousTotal)&&void 0!==t?t:0}ngAfterViewInit(){return Object(h.a)(this,void 0,void 0,(function*(){try{this.courseId=d.a.getRequiredRouteNumberParam("courseId");const e=d.a.getRequiredRouteNumberParam("cmId"),t=b.a.getOrCreateSource(feedback_attempts_source_AddonModFeedbackAttemptsSource,[this.courseId,e]);t.selectedGroup=d.a.getRouteNumberParam("group")||0,this.promisedAttempts.resolve(new attempts_AddonModFeedbackAttemptsManager(t,this.route.component))}catch(e){return A.a.showErrorModal(e),d.a.back(),void 0}const e=yield this.promisedAttempts;try{this.fetchFailed=!1,yield e.getSource().loadFeedback(),yield e.load(),this.logView()}catch(e){this.fetchFailed=!0,A.a.showErrorModalDefault(e,"core.course.errorgetmodule",!0)}yield e.start(this.splitView)}))}ngOnDestroy(){var e;null===(e=this.attempts)||void 0===e?void 0:e.destroy()}fetchMoreAttempts(e){return Object(h.a)(this,void 0,void 0,(function*(){const t=yield this.promisedAttempts;try{this.fetchFailed=!1,yield t.load()}catch(e){this.fetchFailed=!0,A.a.showErrorModalDefault(e,"core.course.errorgetmodule",!0)}finally{e&&e()}}))}refreshFeedback(e){return Object(h.a)(this,void 0,void 0,(function*(){const t=yield this.promisedAttempts;try{this.fetchFailed=!1,yield M.a.ignoreErrors(t.getSource().invalidateCache()),yield t.getSource().loadFeedback(),yield t.reload()}catch(e){this.fetchFailed=!0,A.a.showErrorModalDefault(e,"core.course.errorgetmodule",!0)}finally{e.complete()}}))}reloadAttempts(){return Object(h.a)(this,void 0,void 0,(function*(){const e=yield this.promisedAttempts;yield e.reload()}))}}return AddonModFeedbackAttemptsPage.ɵfac=function AddonModFeedbackAttemptsPage_Factory(e){return new(e||AddonModFeedbackAttemptsPage)(_.yc(o.a))},AddonModFeedbackAttemptsPage.ɵcmp=_.sc({type:AddonModFeedbackAttemptsPage,selectors:[["page-addon-mod-feedback-attempts"]],viewQuery:function AddonModFeedbackAttemptsPage_Query(e,t){var n;(1&e&&_.ud(F.a,!0),2&e)&&(_.dd(n=_.Nc())&&(t.splitView=n.first))},decls:20,vars:18,consts:[["slot","start"],[3,"text"],["slot","fixed",3,"disabled","ionRefresh"],[3,"pullingText"],[3,"hideUntil"],[1,"ion-no-margin"],[3,"groupInfo","selected","courseId","selectedChange"],[4,"ngIf"],[3,"enabled","error","action"],["class","ion-text-wrap","button","","detail","true",3,"click",4,"ngFor","ngForOf"],["button","","detail","true",1,"ion-text-wrap",3,"click"],["slot","start",3,"user","linkProfile"],[1,"item-heading"],["slot","start",3,"linkProfile"]],template:function AddonModFeedbackAttemptsPage_Template(e,t){1&e&&(_.Ec(0,"ion-header"),_.Ec(1,"ion-toolbar"),_.Ec(2,"ion-buttons",0),_.zc(3,"ion-back-button",1),_.Pc(4,"translate"),_.Dc(),_.Ec(5,"ion-title"),_.Ec(6,"h1"),_.pd(7),_.Pc(8,"translate"),_.Dc(),_.Dc(),_.Dc(),_.Dc(),_.Ec(9,"ion-content"),_.Ec(10,"core-split-view"),_.Ec(11,"ion-refresher",2),_.Mc("ionRefresh",(function AddonModFeedbackAttemptsPage_Template_ion_refresher_ionRefresh_11_listener(e){return t.refreshFeedback(e.target)})),_.zc(12,"ion-refresher-content",3),_.Pc(13,"translate"),_.Dc(),_.Ec(14,"core-loading",4),_.Ec(15,"ion-list",5),_.Ec(16,"core-group-selector",6),_.Mc("selectedChange",(function AddonModFeedbackAttemptsPage_Template_core_group_selector_selectedChange_16_listener(e){return t.selectedGroup=e}))("selectedChange",(function AddonModFeedbackAttemptsPage_Template_core_group_selector_selectedChange_16_listener(){return t.reloadAttempts()})),_.Dc(),_.nd(17,AddonModFeedbackAttemptsPage_ng_container_17_Template,7,7,"ng-container",7),_.nd(18,AddonModFeedbackAttemptsPage_ng_container_18_Template,7,7,"ng-container",7),_.Ec(19,"core-infinite-loading",8),_.Mc("action",(function AddonModFeedbackAttemptsPage_Template_core_infinite_loading_action_19_listener(e){return t.fetchMoreAttempts(e)})),_.Dc(),_.Dc(),_.Dc(),_.Dc(),_.Dc()),2&e&&(_.lc(3),_.Vc("text",_.Qc(4,12,"core.back")),_.lc(4),_.qd(_.Qc(8,14,"addon.mod_feedback.responses")),_.lc(4),_.Vc("disabled",!t.attempts||!t.attempts.loaded),_.lc(1),_.Wc("pullingText",_.Qc(13,16,"core.pulltorefresh")),_.lc(2),_.Vc("hideUntil",t.attempts&&t.attempts.loaded),_.lc(2),_.Vc("groupInfo",t.groupInfo)("selected",t.selectedGroup)("courseId",t.courseId),_.lc(1),_.Vc("ngIf",t.identifiableAttemptsTotal>0),_.lc(1),_.Vc("ngIf",t.identifiableAttemptsTotal===t.identifiableAttempts.length&&t.anonymousAttemptsTotal>0),_.lc(1),_.Vc("enabled",t.attempts&&t.attempts.loaded&&!t.attempts.completed)("error",t.fetchFailed))},directives:[s.C,s.Ab,s.m,s.h,s.i,s.yb,g.a,s.v,F.a,s.bb,s.cb,x.a,s.P,O.a,w.t,V.a,s.J,s.O,w.s,s.I,C.a],pipes:[p.d,R.a],encapsulation:2}),AddonModFeedbackAttemptsPage})();class attempts_AddonModFeedbackAttemptsManager extends k.a{}var S=n("vY5A"),q=n("Y+03"),$=n("eoiU"),L=n("vuGA"),z=n("OZH1"),G=n("nu3w"),Q=n("nEkO"),j=n("FasJ");function AddonModFeedbackAttemptPage_h1_6_Template(e,t){if(1&e&&(_.Ec(0,"h1"),_.pd(1),_.Dc()),2&e){const e=_.Oc();_.lc(1),_.qd(e.attempt.fullname)}}function AddonModFeedbackAttemptPage_h1_7_Template(e,t){1&e&&(_.Ec(0,"h1"),_.pd(1),_.Pc(2,"translate"),_.Dc()),2&e&&(_.lc(1),_.qd(_.Qc(2,1,"addon.mod_feedback.anonymous_user")))}function AddonModFeedbackAttemptPage_ion_list_10_ion_item_1_p_6_Template(e,t){if(1&e&&(_.Ec(0,"p"),_.pd(1),_.Pc(2,"coreFormatDate"),_.Dc()),2&e){const e=_.Oc(3);_.lc(1),_.qd(_.Qc(2,1,1e3*e.attempt.timemodified))}}function AddonModFeedbackAttemptPage_ion_list_10_ion_item_1_Template(e,t){if(1&e&&(_.Ec(0,"ion-item",9),_.Pc(1,"translate"),_.zc(2,"core-user-avatar",10),_.Ec(3,"ion-label"),_.Ec(4,"h2"),_.pd(5),_.Dc(),_.nd(6,AddonModFeedbackAttemptPage_ion_list_10_ion_item_1_p_6_Template,3,3,"p",2),_.Dc(),_.Dc()),2&e){const e=_.Oc(2);_.Vc("userId",e.attempt.userid)("courseId",e.attempt.courseid),_.mc("aria-label",_.Qc(1,7,"core.user.viewprofile")),_.lc(2),_.Vc("user",e.attempt)("linkProfile",!1),_.lc(3),_.qd(e.attempt.fullname),_.lc(1),_.Vc("ngIf",e.attempt.timemodified)}}function AddonModFeedbackAttemptPage_ion_list_10_ion_item_2_Template(e,t){if(1&e&&(_.Ec(0,"ion-item",11),_.zc(1,"core-user-avatar",12),_.Ec(2,"ion-label"),_.Ec(3,"h2"),_.pd(4),_.Pc(5,"translate"),_.Dc(),_.Ec(6,"p"),_.pd(7),_.Pc(8,"translate"),_.Dc(),_.Dc(),_.Dc()),2&e){const e=_.Oc(2);_.lc(1),_.Vc("linkProfile",!1),_.lc(3),_.qd(_.Qc(5,4,"addon.mod_feedback.anonymous_user")),_.lc(3),_.sd("",_.Qc(8,6,"addon.mod_feedback.response_nr"),": ",e.anonAttempt.number,"")}}function AddonModFeedbackAttemptPage_ion_list_10_ng_container_3_ng_container_1_core_spacer_1_Template(e,t){1&e&&_.zc(0,"core-spacer")}function AddonModFeedbackAttemptPage_ion_list_10_ng_container_3_ng_container_1_ion_item_2_p_2_span_1_Template(e,t){if(1&e&&(_.Ec(0,"span"),_.pd(1),_.Dc()),2&e){const e=_.Oc(3).$implicit;_.lc(1),_.rd("",e.itemnumber,". ")}}function AddonModFeedbackAttemptPage_ion_list_10_ng_container_3_ng_container_1_ion_item_2_p_2_Template(e,t){if(1&e&&(_.Ec(0,"p",17),_.nd(1,AddonModFeedbackAttemptPage_ion_list_10_ng_container_3_ng_container_1_ion_item_2_p_2_span_1_Template,2,1,"span",2),_.zc(2,"core-format-text",18),_.Dc()),2&e){const e=_.Oc(2).$implicit,t=_.Oc(3);_.Vc("core-mark-required",e.required),_.lc(1),_.Vc("ngIf",t.feedback.autonumbering&&e.itemnumber),_.lc(1),_.Vc("component",t.component)("componentId",t.cmId)("text",e.name)("contextInstanceId",t.cmId)("courseId",t.courseId)}}function AddonModFeedbackAttemptPage_ion_list_10_ng_container_3_ng_container_1_ion_item_2_p_3_Template(e,t){if(1&e&&(_.Ec(0,"p"),_.zc(1,"core-format-text",18),_.Dc()),2&e){const e=_.Oc(2).$implicit,t=_.Oc(3);_.lc(1),_.Vc("component",t.component)("componentId",t.cmId)("text",e.submittedValue)("contextInstanceId",t.cmId)("courseId",t.courseId)}}function AddonModFeedbackAttemptPage_ion_list_10_ng_container_3_ng_container_1_ion_item_2_Template(e,t){if(1&e&&(_.Ec(0,"ion-item",15),_.Ec(1,"ion-label"),_.nd(2,AddonModFeedbackAttemptPage_ion_list_10_ng_container_3_ng_container_1_ion_item_2_p_2_Template,3,7,"p",16),_.nd(3,AddonModFeedbackAttemptPage_ion_list_10_ng_container_3_ng_container_1_ion_item_2_p_3_Template,2,5,"p",2),_.Dc(),_.Dc()),2&e){const e=_.Oc().$implicit;_.Vc("color",e.dependitem>0?"light":""),_.lc(2),_.Vc("ngIf",e.name),_.lc(1),_.Vc("ngIf",e.submittedValue)}}function AddonModFeedbackAttemptPage_ion_list_10_ng_container_3_ng_container_1_Template(e,t){if(1&e&&(_.Cc(0),_.nd(1,AddonModFeedbackAttemptPage_ion_list_10_ng_container_3_ng_container_1_core_spacer_1_Template,1,0,"core-spacer",2),_.nd(2,AddonModFeedbackAttemptPage_ion_list_10_ng_container_3_ng_container_1_ion_item_2_Template,4,3,"ion-item",14),_.Bc()),2&e){const e=t.$implicit;_.lc(1),_.Vc("ngIf","pagebreak"==e.typ),_.lc(1),_.Vc("ngIf","pagebreak"!=e.typ)}}function AddonModFeedbackAttemptPage_ion_list_10_ng_container_3_Template(e,t){if(1&e&&(_.Cc(0),_.nd(1,AddonModFeedbackAttemptPage_ion_list_10_ng_container_3_ng_container_1_Template,3,2,"ng-container",13),_.Bc()),2&e){const e=_.Oc(2);_.lc(1),_.Vc("ngForOf",e.items)}}function AddonModFeedbackAttemptPage_ion_list_10_Template(e,t){if(1&e&&(_.Ec(0,"ion-list",6),_.nd(1,AddonModFeedbackAttemptPage_ion_list_10_ion_item_1_Template,7,9,"ion-item",7),_.nd(2,AddonModFeedbackAttemptPage_ion_list_10_ion_item_2_Template,9,8,"ion-item",8),_.nd(3,AddonModFeedbackAttemptPage_ion_list_10_ng_container_3_Template,2,1,"ng-container",2),_.Dc()),2&e){const e=_.Oc();_.lc(1),_.Vc("ngIf",e.attempt),_.lc(1),_.Vc("ngIf",e.anonAttempt),_.lc(1),_.Vc("ngIf",e.items&&e.items.length)}}let B=(()=>{class AddonModFeedbackAttemptPage{constructor(){this.items=[],this.component=y.b.COMPONENT,this.loaded=!1,this.cmId=d.a.getRequiredRouteNumberParam("cmId"),this.courseId=d.a.getRequiredRouteNumberParam("courseId"),this.attemptId=d.a.getRequiredRouteNumberParam("attemptId");const e=b.a.getOrCreateSource(feedback_attempts_source_AddonModFeedbackAttemptsSource,[this.courseId,this.cmId]);this.attempts=new attempt_AddonModFeedbackAttemptsSwipeManager(e),this.logView=E.a.once((()=>{this.feedback&&D.a.logEvent({type:D.b.VIEW_ITEM,ws:"mod_feedback_get_responses_analysis",name:this.feedback.name,data:{id:this.attemptId,feedbackid:this.feedback.id,category:"feedback"},url:`/mod/feedback/show_entries.php?id=${this.cmId}`+(this.attempt?`userid=${this.attempt.userid}`:"")+`&showcompleted=${this.attemptId}`})}))}ngOnInit(){return Object(h.a)(this,void 0,void 0,(function*(){try{yield this.attempts.start()}catch(e){return A.a.showErrorModal(e),d.a.back(),void 0}this.fetchData()}))}ngOnDestroy(){this.attempts.destroy()}fetchData(){return Object(h.a)(this,void 0,void 0,(function*(){try{this.feedback=yield y.a.getFeedback(this.courseId,this.cmId);const e=yield y.a.getAttempt(this.feedback.id,this.attemptId,{cmId:this.cmId});this.isAnonAttempt(e)?(this.anonAttempt=e,delete this.attempt):(this.attempt=(yield T.a.addImageProfile([e]))[0],delete this.anonAttempt);const t=yield y.a.getItems(this.feedback.id,{cmId:this.cmId});this.items=t.items.map((t=>{const n=T.a.getItemForm(t,!0);if(!n)return;const o=n;if("label"==t.typ)o.submittedValue=L.b.replacePluginfileUrls(t.presentation,t.itemfiles);else for(const n in e.responses)if(e.responses[n].id==t.id){o.submittedValue=e.responses[n].printval;break}return o})).filter((e=>e)),this.logView()}catch(e){A.a.showErrorModalDefault(e,"core.course.errorgetmodule",!0),d.a.back()}finally{this.loaded=!0}}))}isAnonAttempt(e){return!("fullname"in e)}}return AddonModFeedbackAttemptPage.ɵfac=function AddonModFeedbackAttemptPage_Factory(e){return new(e||AddonModFeedbackAttemptPage)},AddonModFeedbackAttemptPage.ɵcmp=_.sc({type:AddonModFeedbackAttemptPage,selectors:[["page-addon-mod-feedback-attempt"]],decls:11,vars:8,consts:[["slot","start"],[3,"text"],[4,"ngIf"],[3,"core-swipe-navigation"],[3,"hideUntil"],["class","ion-no-margin",4,"ngIf"],[1,"ion-no-margin"],["class","ion-text-wrap","core-user-link","",3,"userId","courseId",4,"ngIf"],["class","ion-text-wrap",4,"ngIf"],["core-user-link","",1,"ion-text-wrap",3,"userId","courseId"],["slot","start",3,"user","linkProfile"],[1,"ion-text-wrap"],["slot","start",3,"linkProfile"],[4,"ngFor","ngForOf"],["class","ion-text-wrap",3,"color",4,"ngIf"],[1,"ion-text-wrap",3,"color"],["class","item-heading",3,"core-mark-required",4,"ngIf"],[1,"item-heading",3,"core-mark-required"],["contextLevel","module",3,"component","componentId","text","contextInstanceId","courseId"]],template:function AddonModFeedbackAttemptPage_Template(e,t){1&e&&(_.Ec(0,"ion-header"),_.Ec(1,"ion-toolbar"),_.Ec(2,"ion-buttons",0),_.zc(3,"ion-back-button",1),_.Pc(4,"translate"),_.Dc(),_.Ec(5,"ion-title"),_.nd(6,AddonModFeedbackAttemptPage_h1_6_Template,2,1,"h1",2),_.nd(7,AddonModFeedbackAttemptPage_h1_7_Template,3,3,"h1",2),_.Dc(),_.Dc(),_.Dc(),_.Ec(8,"ion-content",3),_.Ec(9,"core-loading",4),_.nd(10,AddonModFeedbackAttemptPage_ion_list_10_Template,4,3,"ion-list",5),_.Dc(),_.Dc()),2&e&&(_.lc(3),_.Vc("text",_.Qc(4,6,"core.back")),_.lc(3),_.Vc("ngIf",t.attempt),_.lc(1),_.Vc("ngIf",t.anonAttempt),_.lc(1),_.Vc("core-swipe-navigation",t.attempts),_.lc(1),_.Vc("hideUntil",t.loaded),_.lc(1),_.Vc("ngIf",t.attempt||t.anonAttempt))},directives:[s.C,s.Ab,s.m,s.h,s.i,s.yb,w.t,g.a,s.v,z.a,x.a,s.P,s.I,G.a,C.a,s.O,w.s,Q.a,j.a,m.a],pipes:[p.d,R.a],encapsulation:2}),AddonModFeedbackAttemptPage})();class attempt_AddonModFeedbackAttemptsSwipeManager extends $.a{getSelectedItemPathFromRoute(e){return e.params.attemptId}}var U=n("vnm2"),W=n("ULAo"),Y=n("GGba"),J=n("9+EE"),H=n("j3ag"),K=n("fjkH"),X=n("Uh05"),Z=n("0Gvy"),ee=n("3Pt+"),te=n("whRm"),ne=n("3CSS"),oe=n("ACYt"),ce=n("3jOR");function AddonModFeedbackFormPage_ng_container_10_p_7_Template(e,t){1&e&&(_.Ec(0,"p"),_.pd(1),_.Pc(2,"translate"),_.Dc()),2&e&&(_.lc(1),_.qd(_.Qc(2,1,"addon.mod_feedback.anonymous")))}function AddonModFeedbackFormPage_ng_container_10_p_8_Template(e,t){1&e&&(_.Ec(0,"p"),_.pd(1),_.Pc(2,"translate"),_.Dc()),2&e&&(_.lc(1),_.qd(_.Qc(2,1,"addon.mod_feedback.non_anonymous")))}function AddonModFeedbackFormPage_ng_container_10_ng_container_9_core_spacer_1_Template(e,t){1&e&&_.zc(0,"core-spacer")}function AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_p_3_span_1_Template(e,t){if(1&e&&(_.Ec(0,"span"),_.pd(1),_.Dc()),2&e){const e=_.Oc(3).$implicit;_.lc(1),_.rd("",e.itemnumber,". ")}}function AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_p_3_span_3_Template(e,t){if(1&e&&(_.Ec(0,"span",23),_.pd(1),_.Dc()),2&e){const e=_.Oc(3).$implicit;_.lc(1),_.qd(e.postfix)}}function AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_p_3_Template(e,t){if(1&e&&(_.Ec(0,"p",20),_.nd(1,AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_p_3_span_1_Template,2,1,"span",5),_.zc(2,"core-format-text",21),_.nd(3,AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_p_3_span_3_Template,2,1,"span",22),_.Dc()),2&e){const e=_.Oc(2).$implicit,t=_.Oc(2);_.Vc("core-mark-required",e.required),_.lc(1),_.Vc("ngIf",t.feedback.autonumbering&&e.itemnumber),_.lc(1),_.Vc("component",t.component)("componentId",t.cmId)("text",e.name)("contextInstanceId",t.cmId)("courseId",t.courseId)("wsNotFiltered",!0),_.lc(1),_.Vc("ngIf",e.postfix)}}function AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_p_4_Template(e,t){if(1&e&&(_.Ec(0,"p"),_.zc(1,"core-format-text",24),_.Dc()),2&e){const e=_.Oc(2).$implicit,t=_.Oc(2);_.lc(1),_.Vc("component",t.component)("componentId",t.cmId)("text",e.presentation)("contextInstanceId",t.cmId)("wsNotFiltered",!0)("courseId",t.courseId)}}function AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_ion_input_5_Template(e,t){if(1&e){const e=_.Fc();_.Ec(0,"ion-input",25),_.Mc("ngModelChange",(function AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_ion_input_5_Template_ion_input_ngModelChange_0_listener(t){_.fd(e);return _.Oc(2).$implicit.value=t})),_.Dc()}if(2&e){const e=_.Oc(2).$implicit;_.Yc("name","",e.typ,"_",e.id,""),_.Wc("maxlength",e.length),_.Vc("ngModel",e.value)("required",e.required)}}function AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_ng_container_6_ion_text_2_span_3_Template(e,t){1&e&&(_.Ec(0,"span"),_.pd(1,", "),_.Dc())}function AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_ng_container_6_ion_text_2_Template(e,t){if(1&e&&(_.Ec(0,"ion-text",28),_.pd(1),_.Pc(2,"translate"),_.nd(3,AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_ng_container_6_ion_text_2_span_3_Template,2,0,"span",5),_.pd(4),_.Dc()),2&e){const e=_.Oc(3).$implicit;_.lc(1),_.sd(" ",_.Qc(2,4,"addon.mod_feedback.numberoutofrange")," [",e.rangefrom," "),_.lc(2),_.Vc("ngIf",e.rangefrom&&e.rangeto),_.lc(1),_.rd("",e.rangeto,"] ")}}function AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_ng_container_6_Template(e,t){if(1&e){const e=_.Fc();_.Cc(0),_.Ec(1,"ion-input",26),_.Mc("ngModelChange",(function AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_ng_container_6_Template_ion_input_ngModelChange_1_listener(t){_.fd(e);return _.Oc(2).$implicit.value=t})),_.Dc(),_.nd(2,AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_ng_container_6_ion_text_2_Template,5,6,"ion-text",27),_.Bc()}if(2&e){const e=_.Oc(2).$implicit;_.lc(1),_.Yc("name","",e.typ,"_",e.id,""),_.Vc("ngModel",e.value)("required",e.required),_.lc(1),_.Vc("ngIf",e.hasError)}}function AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_ion_textarea_7_Template(e,t){if(1&e){const e=_.Fc();_.Ec(0,"ion-textarea",29),_.Mc("ngModelChange",(function AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_ion_textarea_7_Template_ion_textarea_ngModelChange_0_listener(t){_.fd(e);return _.Oc(2).$implicit.value=t})),_.Dc()}if(2&e){const e=_.Oc(2).$implicit;_.Yc("name","",e.typ,"_",e.id,""),_.Vc("required",e.required)("ngModel",e.value)}}function AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_ion_select_8_ion_select_option_2_Template(e,t){if(1&e&&(_.Ec(0,"ion-select-option",32),_.zc(1,"core-format-text",24),_.Dc()),2&e){const e=t.$implicit,n=_.Oc(5);_.Vc("value",e.value),_.lc(1),_.Vc("component",n.component)("componentId",n.cmId)("text",e.label)("contextInstanceId",n.cmId)("wsNotFiltered",!0)("courseId",n.courseId)}}const form_c0=function(e){return{header:e}};function AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_ion_select_8_Template(e,t){if(1&e){const e=_.Fc();_.Ec(0,"ion-select",30),_.Mc("ngModelChange",(function AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_ion_select_8_Template_ion_select_ngModelChange_0_listener(t){_.fd(e);return _.Oc(2).$implicit.value=t})),_.Pc(1,"translate"),_.nd(2,AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_ion_select_8_ion_select_option_2_Template,2,7,"ion-select-option",31),_.Dc()}if(2&e){const e=_.Oc(2).$implicit;_.Yc("name","",e.typ,"_",e.id,""),_.Vc("required",e.required)("ngModel",e.value)("cancelText",_.Qc(1,7,"core.cancel"))("interfaceOptions",_.ad(9,form_c0,e.name)),_.lc(2),_.Vc("ngForOf",e.choices)}}function AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_ion_radio_group_9_ion_item_1_Template(e,t){if(1&e&&(_.Ec(0,"ion-item"),_.Ec(1,"ion-label"),_.zc(2,"core-format-text",24),_.Dc(),_.zc(3,"ion-radio",34),_.Dc()),2&e){const e=t.$implicit,n=_.Oc(5);_.lc(2),_.Vc("component",n.component)("componentId",n.cmId)("text",e.label)("contextInstanceId",n.cmId)("wsNotFiltered",!0)("courseId",n.courseId),_.lc(1),_.Vc("value",e.value)}}function AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_ion_radio_group_9_Template(e,t){if(1&e){const e=_.Fc();_.Ec(0,"ion-radio-group",33),_.Mc("ngModelChange",(function AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_ion_radio_group_9_Template_ion_radio_group_ngModelChange_0_listener(t){_.fd(e);return _.Oc(2).$implicit.value=t})),_.nd(1,AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_ion_radio_group_9_ion_item_1_Template,4,7,"ion-item",11),_.Dc()}if(2&e){const e=_.Oc(2).$implicit;_.Yc("name","",e.typ,"_",e.id,""),_.Vc("ngModel",e.value)("required",e.required),_.lc(1),_.Vc("ngForOf",e.choices)}}function AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_ng_container_10_ion_item_1_Template(e,t){if(1&e){const e=_.Fc();_.Ec(0,"ion-item"),_.Ec(1,"ion-label"),_.zc(2,"core-format-text",24),_.Dc(),_.Ec(3,"ion-checkbox",35),_.Mc("ngModelChange",(function AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_ng_container_10_ion_item_1_Template_ion_checkbox_ngModelChange_3_listener(n){_.fd(e);return t.$implicit.checked=n})),_.Dc(),_.Dc()}if(2&e){const e=t.$implicit,n=_.Oc(3).$implicit,o=_.Oc(2);_.lc(2),_.Vc("component",o.component)("componentId",o.cmId)("text",e.label)("contextInstanceId",o.cmId)("wsNotFiltered",!0)("courseId",o.courseId),_.lc(1),_.Yc("name","",n.typ,"_",n.id,""),_.Vc("required",n.required)("ngModel",e.checked)}}function AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_ng_container_10_Template(e,t){if(1&e&&(_.Cc(0),_.nd(1,AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_ng_container_10_ion_item_1_Template,4,10,"ion-item",11),_.Bc()),2&e){const e=_.Oc(2).$implicit;_.lc(1),_.Vc("ngForOf",e.choices)}}function AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_ng_container_11_core_recaptcha_1_Template(e,t){if(1&e&&_.zc(0,"core-recaptcha",38),2&e){const e=_.Oc(3).$implicit;_.Vc("publicKey",e.captcha.recaptchapublickey)("model",e)}}function AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_ng_container_11_div_2_Template(e,t){1&e&&(_.Ec(0,"div",39),_.Ec(1,"ion-item"),_.zc(2,"ion-icon",40),_.Ec(3,"ion-label"),_.pd(4),_.Pc(5,"translate"),_.Dc(),_.Dc(),_.Dc()),2&e&&(_.lc(4),_.qd(_.Qc(5,1,"addon.mod_feedback.captchaofflinewarning")))}function AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_ng_container_11_Template(e,t){if(1&e&&(_.Cc(0),_.nd(1,AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_ng_container_11_core_recaptcha_1_Template,1,2,"core-recaptcha",36),_.nd(2,AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_ng_container_11_div_2_Template,6,3,"div",37),_.Bc()),2&e){const e=_.Oc(2).$implicit,t=_.Oc(2);_.lc(1),_.Vc("ngIf",!t.preview&&!t.offline),_.lc(1),_.Vc("ngIf",!t.preview&&(!e.captcha||t.offline))}}function AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_Template(e,t){if(1&e&&(_.Cc(0),_.Ec(1,"ion-item",13),_.Ec(2,"ion-label",14),_.nd(3,AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_p_3_Template,4,9,"p",15),_.nd(4,AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_p_4_Template,2,6,"p",5),_.Dc(),_.nd(5,AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_ion_input_5_Template,1,5,"ion-input",16),_.nd(6,AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_ng_container_6_Template,3,5,"ng-container",5),_.nd(7,AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_ion_textarea_7_Template,1,4,"ion-textarea",17),_.nd(8,AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_ion_select_8_Template,3,11,"ion-select",18),_.Dc(),_.nd(9,AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_ion_radio_group_9_Template,2,5,"ion-radio-group",19),_.nd(10,AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_ng_container_10_Template,2,1,"ng-container",5),_.nd(11,AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_ng_container_11_Template,3,2,"ng-container",5),_.Bc()),2&e){const e=_.Oc().$implicit;_.lc(1),_.qc("core-danger-item",e.isEmpty||e.hasError),_.Vc("color",e.dependitem>0?"light":""),_.lc(1),_.Vc("position",e.hasTextInput?"stacked":void 0),_.lc(1),_.Vc("ngIf",e.name),_.lc(1),_.Vc("ngIf","label"==e.templateName),_.lc(1),_.Vc("ngIf","textfield"==e.templateName),_.lc(1),_.Vc("ngIf","numeric"==e.templateName),_.lc(1),_.Vc("ngIf","textarea"==e.templateName),_.lc(1),_.Vc("ngIf","multichoice-d"==e.templateName),_.lc(1),_.Vc("ngIf","multichoice-r"==e.templateName),_.lc(1),_.Vc("ngIf","multichoice-c"==e.templateName),_.lc(1),_.Vc("ngIf","captcha"==e.templateName)}}function AddonModFeedbackFormPage_ng_container_10_ng_container_9_Template(e,t){if(1&e&&(_.Cc(0),_.nd(1,AddonModFeedbackFormPage_ng_container_10_ng_container_9_core_spacer_1_Template,1,0,"core-spacer",5),_.nd(2,AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_Template,12,13,"ng-container",5),_.Bc()),2&e){const e=t.$implicit;_.lc(1),_.Vc("ngIf","pagebreak"==e.typ),_.lc(1),_.Vc("ngIf","pagebreak"!=e.typ)}}function AddonModFeedbackFormPage_ng_container_10_ion_row_10_ion_col_1_Template(e,t){if(1&e){const e=_.Fc();_.Ec(0,"ion-col"),_.Ec(1,"ion-button",42),_.Mc("click",(function AddonModFeedbackFormPage_ng_container_10_ion_row_10_ion_col_1_Template_ion_button_click_1_listener(){_.fd(e);return _.Oc(3).gotoPage(!0)})),_.zc(2,"ion-icon",43),_.pd(3),_.Pc(4,"translate"),_.Dc(),_.Dc()}2&e&&(_.lc(3),_.rd(" ",_.Qc(4,1,"core.previous")," "))}function AddonModFeedbackFormPage_ng_container_10_ion_row_10_ion_col_2_Template(e,t){if(1&e){const e=_.Fc();_.Ec(0,"ion-col"),_.Ec(1,"ion-button",44),_.Mc("click",(function AddonModFeedbackFormPage_ng_container_10_ion_row_10_ion_col_2_Template_ion_button_click_1_listener(){_.fd(e);return _.Oc(3).gotoPage(!1)})),_.pd(2),_.Pc(3,"translate"),_.zc(4,"ion-icon",45),_.Dc(),_.Dc()}2&e&&(_.lc(2),_.rd(" ",_.Qc(3,1,"core.next")," "))}function AddonModFeedbackFormPage_ng_container_10_ion_row_10_ion_col_3_Template(e,t){if(1&e){const e=_.Fc();_.Ec(0,"ion-col"),_.Ec(1,"ion-button",44),_.Mc("click",(function AddonModFeedbackFormPage_ng_container_10_ion_row_10_ion_col_3_Template_ion_button_click_1_listener(){_.fd(e);return _.Oc(3).gotoPage(!1)})),_.pd(2),_.Pc(3,"translate"),_.Dc(),_.Dc()}2&e&&(_.lc(2),_.rd(" ",_.Qc(3,1,"core.submit")," "))}function AddonModFeedbackFormPage_ng_container_10_ion_row_10_Template(e,t){if(1&e&&(_.Ec(0,"ion-row",41),_.nd(1,AddonModFeedbackFormPage_ng_container_10_ion_row_10_ion_col_1_Template,5,3,"ion-col",5),_.nd(2,AddonModFeedbackFormPage_ng_container_10_ion_row_10_ion_col_2_Template,5,3,"ion-col",5),_.nd(3,AddonModFeedbackFormPage_ng_container_10_ion_row_10_ion_col_3_Template,4,3,"ion-col",5),_.Dc()),2&e){const e=_.Oc(2);_.lc(1),_.Vc("ngIf",e.hasPrevPage),_.lc(1),_.Vc("ngIf",e.hasNextPage),_.lc(1),_.Vc("ngIf",!e.hasNextPage)}}function AddonModFeedbackFormPage_ng_container_10_Template(e,t){if(1&e&&(_.Cc(0),_.Ec(1,"ion-list",8),_.Ec(2,"ion-item",9),_.Ec(3,"ion-label"),_.Ec(4,"p",10),_.pd(5),_.Pc(6,"translate"),_.Dc(),_.nd(7,AddonModFeedbackFormPage_ng_container_10_p_7_Template,3,3,"p",5),_.nd(8,AddonModFeedbackFormPage_ng_container_10_p_8_Template,3,3,"p",5),_.Dc(),_.Dc(),_.nd(9,AddonModFeedbackFormPage_ng_container_10_ng_container_9_Template,3,2,"ng-container",11),_.nd(10,AddonModFeedbackFormPage_ng_container_10_ion_row_10_Template,4,3,"ion-row",12),_.Dc(),_.Bc()),2&e){const e=_.Oc();_.lc(5),_.qd(_.Qc(6,5,"addon.mod_feedback.mode")),_.lc(2),_.Vc("ngIf",e.access.isanonymous),_.lc(1),_.Vc("ngIf",!e.access.isanonymous),_.lc(1),_.Vc("ngForOf",e.items),_.lc(1),_.Vc("ngIf",!e.preview)}}function AddonModFeedbackFormPage_ion_card_11_p_4_Template(e,t){1&e&&(_.Ec(0,"p"),_.pd(1),_.Pc(2,"translate"),_.Dc()),2&e&&(_.lc(1),_.rd(" ",_.Qc(2,1,"addon.mod_feedback.this_feedback_is_already_submitted")," "))}function AddonModFeedbackFormPage_ion_card_11_p_5_Template(e,t){1&e&&(_.Ec(0,"p"),_.pd(1),_.Pc(2,"translate"),_.Dc()),2&e&&(_.lc(1),_.rd(" ",_.Qc(2,1,"addon.mod_feedback.feedback_submitted_offline")," "))}function AddonModFeedbackFormPage_ion_card_11_core_format_text_6_Template(e,t){if(1&e&&_.zc(0,"core-format-text",49),2&e){const e=_.Oc(2);_.Vc("component",e.component)("text",e.completionPageContents)("contextInstanceId",e.cmId)("courseId",e.courseId)}}function AddonModFeedbackFormPage_ion_card_11_Template(e,t){if(1&e&&(_.Ec(0,"ion-card",46),_.Ec(1,"ion-item",9),_.zc(2,"ion-icon",47),_.Ec(3,"ion-label"),_.nd(4,AddonModFeedbackFormPage_ion_card_11_p_4_Template,3,3,"p",5),_.nd(5,AddonModFeedbackFormPage_ion_card_11_p_5_Template,3,3,"p",5),_.nd(6,AddonModFeedbackFormPage_ion_card_11_core_format_text_6_Template,1,4,"core-format-text",48),_.Dc(),_.Dc(),_.Dc()),2&e){const e=_.Oc();_.lc(4),_.Vc("ngIf",!e.completionPageContents&&!e.completedOffline),_.lc(1),_.Vc("ngIf",!e.completionPageContents&&e.completedOffline),_.lc(1),_.Vc("ngIf",e.completionPageContents)}}function AddonModFeedbackFormPage_div_12_ion_button_2_Template(e,t){if(1&e){const e=_.Fc();_.Ec(0,"ion-button",54),_.Mc("click",(function AddonModFeedbackFormPage_div_12_ion_button_2_Template_ion_button_click_0_listener(){_.fd(e);return _.Oc(2).showAnalysis()})),_.zc(1,"ion-icon",55),_.pd(2),_.Pc(3,"translate"),_.Dc()}2&e&&(_.lc(2),_.rd(" ",_.Qc(3,1,"addon.mod_feedback.completed_feedbacks")," "))}function AddonModFeedbackFormPage_div_12_ng_container_4_Template(e,t){1&e&&(_.Cc(0),_.pd(1),_.Pc(2,"translate"),_.Bc()),2&e&&(_.lc(1),_.qd(_.Qc(2,1,"core.continue")))}function AddonModFeedbackFormPage_div_12_ng_container_5_Template(e,t){1&e&&(_.Cc(0),_.pd(1),_.Pc(2,"translate"),_.Bc()),2&e&&(_.lc(1),_.qd(_.Qc(2,1,"core.course.nextactivity")))}function AddonModFeedbackFormPage_div_12_Template(e,t){if(1&e){const e=_.Fc();_.Ec(0,"div",50),_.Ec(1,"div",51),_.nd(2,AddonModFeedbackFormPage_div_12_ion_button_2_Template,4,3,"ion-button",52),_.Ec(3,"ion-button",53),_.Mc("click",(function AddonModFeedbackFormPage_div_12_Template_ion_button_click_3_listener(){_.fd(e);return _.Oc().continue()})),_.nd(4,AddonModFeedbackFormPage_div_12_ng_container_4_Template,3,3,"ng-container",5),_.nd(5,AddonModFeedbackFormPage_div_12_ng_container_5_Template,3,3,"ng-container",5),_.Dc(),_.Dc(),_.Dc()}if(2&e){const e=_.Oc();_.lc(2),_.Vc("ngIf",e.access.canviewanalysis),_.lc(2),_.Vc("ngIf",!e.siteAfterSubmit),_.lc(1),_.Vc("ngIf",e.siteAfterSubmit)}}let ae=(()=>{class AddonModFeedbackFormPage{constructor(){this.forceLeave=!1,this.preview=!1,this.fromIndex=!1,this.component=y.b.COMPONENT,this.offline=!1,this.feedbackLoaded=!1,this.items=[],this.hasPrevPage=!1,this.hasNextPage=!1,this.completed=!1,this.completedOffline=!1,this.currentSite=J.b.getRequiredCurrentSite(),this.onlineObserver=Y.a.onChange().subscribe((()=>{H.z.run((()=>{this.offline=!Y.a.isOnline()}))}))}ngOnInit(){return Object(h.a)(this,void 0,void 0,(function*(){try{this.cmId=d.a.getRequiredRouteNumberParam("cmId"),this.courseId=d.a.getRequiredRouteNumberParam("courseId"),this.currentPage=d.a.getRouteNumberParam("page"),this.title=d.a.getRouteParam("title"),this.preview=!!d.a.getRouteBooleanParam("preview"),this.fromIndex=!!d.a.getRouteBooleanParam("fromIndex")}catch(e){return A.a.showErrorModal(e),d.a.back(),void 0}if(yield this.fetchData(),!this.access||this.access.isempty&&!this.access.canedititems&&!this.access.canviewreports)return A.a.showErrorModal(H.I.instant("core.nopermissiontoaccesspage")),d.a.back(),void 0;if(this.feedback)try{yield y.a.logView(this.feedback.id,!0),W.a.checkModuleCompletion(this.courseId,this.module.completiondata)}catch(e){}}))}ionViewDidEnter(){this.forceLeave=!1}canLeave(){return Object(h.a)(this,void 0,void 0,(function*(){if(this.forceLeave)return!0;if(!this.preview){const e=T.a.getPageItemsResponses(this.items);this.items&&!this.completed&&this.originalData&&(M.a.basicLeftCompare(e,this.originalData,3)||(yield A.a.showConfirm(H.I.instant("core.confirmcanceledit"))))}return!0}))}fetchData(){var e;return Object(h.a)(this,void 0,void 0,(function*(){try{this.module=yield W.a.getModule(this.cmId,this.courseId,void 0,!0,!1,this.currentSite.getId()),this.offline=!Y.a.isOnline();const t={cmId:this.cmId,readingStrategy:this.offline?1:2,siteId:this.currentSite.getId()};this.feedback=yield y.a.getFeedback(this.courseId,this.cmId),this.title=this.feedback.name||this.title,yield this.fetchAccessData(t);let n=0;this.preview||!this.access.cansubmit||this.access.isempty?this.preview=!0:n=null!==(e=this.currentPage)&&void 0!==e?e:yield this.fetchResumePage(t),yield this.fetchFeedbackPageData(n)}catch(e){A.a.showErrorModalDefault(e,"core.course.errorgetmodule",!0),this.forceLeave=!0,d.a.back()}finally{this.feedbackLoaded=!0}}))}fetchAccessData(e){return Object(h.a)(this,void 0,void 0,(function*(){try{this.access=yield y.a.getFeedbackAccessInformation(this.feedback.id,e)}catch(t){if(this.offline||M.a.isWebServiceError(t))throw t;this.offline=!0,e.readingStrategy=1,this.access=yield y.a.getFeedbackAccessInformation(this.feedback.id,e)}}))}fetchResumePage(e){return Object(h.a)(this,void 0,void 0,(function*(){try{return yield y.a.getResumePage(this.feedback.id,e)}catch(t){if(this.offline||M.a.isWebServiceError(t))throw t;return this.offline=!0,e.readingStrategy=1,y.a.getResumePage(this.feedback.id,e)}}))}fetchFeedbackPageData(e=0){return Object(h.a)(this,void 0,void 0,(function*(){this.items=[];const t=yield this.fetchPageItems(e);if(this.items=t.items.map((e=>T.a.getItemForm(e,this.preview))).filter((e=>e)),!this.preview){const e=M.a.clone(this.items);this.originalData=T.a.getPageItemsResponses(e)}this.analyticsLogEvent()}))}fetchPageItems(e){return Object(h.a)(this,void 0,void 0,(function*(){const t={cmId:this.cmId,readingStrategy:this.offline?1:2,siteId:this.currentSite.getId()};if(this.preview){const e=yield y.a.getItems(this.feedback.id,t);return{items:e.items,warnings:e.warnings,hasnextpage:!1,hasprevpage:!1}}let n;this.currentPage=e;try{n=yield y.a.getPageItemsWithValues(this.feedback.id,e,t)}catch(o){if(this.offline||M.a.isWebServiceError(o))throw o;this.offline=!0,t.readingStrategy=1,n=yield y.a.getPageItemsWithValues(this.feedback.id,e,t)}return this.hasPrevPage=!!n.hasprevpage,this.hasNextPage=!!n.hasnextpage,n}))}gotoPage(e){var t;return Object(h.a)(this,void 0,void 0,(function*(){null===(t=this.content)||void 0===t?void 0:t.scrollToTop(),this.feedbackLoaded=!1;const n=T.a.getPageItemsResponses(this.items),o=this.items.some((e=>e.isEmpty||e.hasError));try{yield M.a.ignoreErrors(X.a.syncFeedback(this.feedback.id));const t=yield y.a.processPage(this.feedback.id,this.currentPage,n,{goPrevious:e,formHasErrors:o,courseId:this.courseId,cmId:this.cmId});t.completed?(this.items=[],this.completed=!0,this.completedOffline=!!t.offline,this.completionPageContents=t.completionpagecontents,this.siteAfterSubmit=t.siteaftersubmit,K.b.trigger(K.b.ACTIVITY_DATA_SENT,{module:"feedback"}),yield Promise.all([y.a.invalidateFeedbackAccessInformationData(this.feedback.id),y.a.invalidateResumePageData(this.feedback.id)]),K.b.trigger(y.b.FORM_SUBMITTED,{feedbackId:this.feedback.id,tab:"overview",offline:this.completedOffline}),yield this.fetchAccessData({cmId:this.cmId,readingStrategy:this.offline?1:2,siteId:this.currentSite.getId()})):"number"!=typeof t.jumpto||t.jumpto==this.currentPage||(yield y.a.invalidateResumePageData(this.feedback.id),K.b.trigger(y.b.FORM_SUBMITTED,{feedbackId:this.feedback.id,tab:"overview",offline:this.completedOffline}),yield this.fetchFeedbackPageData(t.jumpto))}catch(e){A.a.showErrorModalDefault(e,"core.course.errorgetmodule",!0)}finally{this.feedbackLoaded=!0}}))}showAnalysis(){if(this.fromIndex)return K.b.trigger(y.b.FORM_SUBMITTED,{feedbackId:this.feedback.id,tab:"analysis",offline:this.completedOffline}),d.a.back(),void 0;d.a.navigateToSitePath(Z.b.PAGE_NAME+`/${this.courseId}/${this.cmId}`,{params:{module:this.module,tab:"analysis"}})}continue(){return Object(h.a)(this,void 0,void 0,(function*(){if(!this.siteAfterSubmit)return d.a.back();const e=yield A.a.showModalLoading();try{(yield U.a.handleLink(this.siteAfterSubmit))||(yield this.currentSite.openInBrowserWithAutoLogin(this.siteAfterSubmit))}finally{e.dismiss()}}))}analyticsLogEvent(){if(!this.feedback)return;if(this.preview)return D.a.logEvent({type:D.b.VIEW_ITEM,ws:"mod_feedback_get_items",name:this.feedback.name,data:{id:this.feedback.id,category:"feedback"},url:`/mod/feedback/print.php?id=${this.cmId}&courseid=${this.courseId}`}),void 0;let e="/mod/feedback/complete.php";this.completed||(e+=`?id=${this.cmId}`+(this.currentPage?`&gopage=${this.currentPage}`:"")+`&courseid=${this.courseId}`),D.a.logEvent({type:D.b.VIEW_ITEM,ws:this.completed?"mod_feedback_get_feedback_access_information":"mod_feedback_get_page_items",name:this.feedback.name,data:{id:this.feedback.id,category:"feedback",page:this.currentPage},url:e})}ngOnDestroy(){this.onlineObserver.unsubscribe()}}return AddonModFeedbackFormPage.ɵfac=function AddonModFeedbackFormPage_Factory(e){return new(e||AddonModFeedbackFormPage)},AddonModFeedbackFormPage.ɵcmp=_.sc({type:AddonModFeedbackFormPage,selectors:[["page-addon-mod-feedback-form"]],viewQuery:function AddonModFeedbackFormPage_Query(e,t){var n;(1&e&&_.ud(s.v,!0),2&e)&&(_.dd(n=_.Nc())&&(t.content=n.first))},decls:13,vars:10,consts:[["slot","start"],[3,"text"],["contextLevel","module",3,"text","contextInstanceId","courseId"],[1,"limited-width"],[1,"has-spacer",3,"hideUntil"],[4,"ngIf"],["class","core-success-card",4,"ngIf"],["collapsible-footer","","slot","fixed","appearOnBottom","",4,"ngIf"],[1,"ion-no-margin","has-spacer"],[1,"ion-text-wrap"],[1,"item-heading"],[4,"ngFor","ngForOf"],["class","ion-align-items-center spacer-top",4,"ngIf"],[1,"ion-text-wrap","addon-mod_feedback-item",3,"color"],[3,"position"],[3,"core-mark-required",4,"ngIf"],["type","text","autocorrect","off",3,"ngModel","name","maxlength","required","ngModelChange",4,"ngIf"],[3,"required","name","ngModel","ngModelChange",4,"ngIf"],["interface","action-sheet",3,"required","name","ngModel","cancelText","interfaceOptions","ngModelChange",4,"ngIf"],[3,"ngModel","required","name","ngModelChange",4,"ngIf"],[3,"core-mark-required"],["contextLevel","module",3,"component","componentId","text","contextInstanceId","courseId","wsNotFiltered"],["class","addon-mod_feedback-postfix",4,"ngIf"],[1,"addon-mod_feedback-postfix"],["contextLevel","module",3,"component","componentId","text","contextInstanceId","wsNotFiltered","courseId"],["type","text","autocorrect","off",3,"ngModel","name","maxlength","required","ngModelChange"],["type","number",3,"ngModel","name","required","ngModelChange"],["color","danger","class","addon-mod_feedback-item-error",4,"ngIf"],["color","danger",1,"addon-mod_feedback-item-error"],[3,"required","name","ngModel","ngModelChange"],["interface","action-sheet",3,"required","name","ngModel","cancelText","interfaceOptions","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[3,"ngModel","required","name","ngModelChange"],["slot","start",3,"value"],["value","option.value",3,"required","name","ngModel","ngModelChange"],["modelValueName","value",3,"publicKey","model",4,"ngIf"],["class","core-warning-card",4,"ngIf"],["modelValueName","value",3,"publicKey","model"],[1,"core-warning-card"],["name","fas-triangle-exclamation","slot","start","aria-hidden","true"],[1,"ion-align-items-center","spacer-top"],["expand","block","fill","outline",1,"ion-text-wrap",3,"click"],["name","fas-chevron-left","slot","start","aria-hidden","true"],["expand","block",1,"ion-text-wrap",3,"click"],["name","fas-chevron-right","slot","end","aria-hidden","true"],[1,"core-success-card"],["name","fas-check","slot","start","aria-hidden","true"],["componentId","componentId","contextLevel","module",3,"component","text","contextInstanceId","courseId",4,"ngIf"],["componentId","componentId","contextLevel","module",3,"component","text","contextInstanceId","courseId"],["collapsible-footer","","slot","fixed","appearOnBottom",""],[1,"list-item-limited-width","adaptable-buttons-row"],["expand","block","fill","outline","class","ion-text-wrap ion-margin",3,"click",4,"ngIf"],["expand","block",1,"ion-text-wrap","ion-margin",3,"click"],["expand","block","fill","outline",1,"ion-text-wrap","ion-margin",3,"click"],["name","fas-chart-bar","slot","start","aria-hidden","true"]],template:function AddonModFeedbackFormPage_Template(e,t){1&e&&(_.Ec(0,"ion-header"),_.Ec(1,"ion-toolbar"),_.Ec(2,"ion-buttons",0),_.zc(3,"ion-back-button",1),_.Pc(4,"translate"),_.Dc(),_.Ec(5,"ion-title"),_.Ec(6,"h1"),_.zc(7,"core-format-text",2),_.Dc(),_.Dc(),_.Dc(),_.Dc(),_.Ec(8,"ion-content",3),_.Ec(9,"core-loading",4),_.nd(10,AddonModFeedbackFormPage_ng_container_10_Template,11,7,"ng-container",5),_.nd(11,AddonModFeedbackFormPage_ion_card_11_Template,7,3,"ion-card",6),_.nd(12,AddonModFeedbackFormPage_div_12_Template,6,3,"div",7),_.Dc(),_.Dc()),2&e&&(_.lc(3),_.Vc("text",_.Qc(4,8,"core.back")),_.lc(4),_.Vc("text",t.title)("contextInstanceId",t.cmId)("courseId",t.courseId),_.lc(2),_.Vc("hideUntil",t.feedbackLoaded),_.lc(1),_.Vc("ngIf",t.items&&t.items.length),_.lc(1),_.Vc("ngIf",t.completed),_.lc(1),_.Vc("ngIf",t.feedbackLoaded&&t.completed))},directives:[s.C,s.Ab,s.m,s.h,s.i,s.yb,m.a,g.a,s.v,x.a,w.t,s.P,s.I,s.O,w.s,Q.a,j.a,s.H,s.Pb,ee.r,ee.u,ee.n,ee.C,s.Jb,s.vb,s.wb,s.lb,s.Ob,s.mb,s.Z,s.Y,s.Mb,s.s,s.d,te.a,s.D,ne.a,s.hb,s.u,oe.a,s.l,s.n,ce.a],pipes:[p.d],styles:["[_nghost-%COMP%]   .addon-mod_feedback-item[_ngcontent-%COMP%]   ion-label.label-stacked[_ngcontent-%COMP%]{margin:11px 0 10px;transform:none}[_nghost-%COMP%]   .addon-mod_feedback-item-error[_ngcontent-%COMP%]{padding-top:5px;padding-bottom:8px}"]}),AddonModFeedbackFormPage})();var ie=n("MLi9");function AddonModFeedbackNonRespondentsPage_ng_container_21_ion_item_1_ion_badge_6_Template(e,t){1&e&&(_.Ec(0,"ion-badge",15),_.pd(1),_.Pc(2,"translate"),_.Dc()),2&e&&(_.lc(1),_.rd(" ",_.Qc(2,1,"addon.mod_feedback.started")," "))}function AddonModFeedbackNonRespondentsPage_ng_container_21_ion_item_1_ion_badge_7_Template(e,t){1&e&&(_.Ec(0,"ion-badge",16),_.pd(1),_.Pc(2,"translate"),_.Dc()),2&e&&(_.lc(1),_.rd(" ",_.Qc(2,1,"addon.mod_feedback.not_started")," "))}function AddonModFeedbackNonRespondentsPage_ng_container_21_ion_item_1_Template(e,t){if(1&e&&(_.Ec(0,"ion-item",10),_.zc(1,"core-user-avatar",11),_.Ec(2,"ion-label"),_.Ec(3,"p",12),_.pd(4),_.Dc(),_.Ec(5,"p"),_.nd(6,AddonModFeedbackNonRespondentsPage_ng_container_21_ion_item_1_ion_badge_6_Template,3,3,"ion-badge",13),_.nd(7,AddonModFeedbackNonRespondentsPage_ng_container_21_ion_item_1_ion_badge_7_Template,3,3,"ion-badge",14),_.Dc(),_.Dc(),_.Dc()),2&e){const e=t.$implicit;_.lc(1),_.Vc("user",e),_.lc(3),_.qd(e.fullname),_.lc(2),_.Vc("ngIf",e.started),_.lc(1),_.Vc("ngIf",!e.started)}}function AddonModFeedbackNonRespondentsPage_ng_container_21_Template(e,t){if(1&e&&(_.Cc(0),_.nd(1,AddonModFeedbackNonRespondentsPage_ng_container_21_ion_item_1_Template,8,4,"ion-item",9),_.Bc()),2&e){const e=_.Oc();_.lc(1),_.Vc("ngForOf",e.users)}}const nonrespondents_c0=function(e){return{$a:e}};let de=(()=>{class AddonModFeedbackNonRespondentsPage{constructor(){this.page=0,this.users=[],this.total=0,this.canLoadMore=!1,this.loaded=!1,this.loadMoreError=!1,this.logView=E.a.once((()=>{this.feedback&&D.a.logEvent({type:D.b.VIEW_ITEM_LIST,ws:"mod_feedback_get_non_respondents",name:this.feedback.name,data:{feedbackid:this.feedback.id,category:"feedback"},url:`/mod/feedback/show_nonrespondents.php?id=${this.cmId}&courseid=${this.courseId}`})}))}ngOnInit(){try{this.cmId=d.a.getRequiredRouteNumberParam("cmId"),this.courseId=d.a.getRequiredRouteNumberParam("courseId"),this.selectedGroup=d.a.getRouteNumberParam("group")||0}catch(e){return A.a.showErrorModal(e),d.a.back(),void 0}this.fetchData()}fetchData(e=!1){return Object(h.a)(this,void 0,void 0,(function*(){this.page=0,this.total=0,this.users=[];try{this.feedback=yield y.a.getFeedback(this.courseId,this.cmId),this.groupInfo=yield v.a.getActivityGroupInfo(this.cmId),this.selectedGroup=v.a.validateGroupId(this.selectedGroup,this.groupInfo),yield this.loadGroupUsers(this.selectedGroup),this.logView()}catch(t){A.a.showErrorModalDefault(t,"core.course.errorgetmodule",!0),e||d.a.back()}}))}loadGroupUsers(e){return Object(h.a)(this,void 0,void 0,(function*(){this.loadMoreError=!1,void 0===e?this.page++:(this.selectedGroup=e,this.page=0,this.total=0,this.users=[],this.loaded=!1);try{const e=yield T.a.getNonRespondents(this.feedback.id,{groupId:this.selectedGroup,page:this.page,cmId:this.cmId});this.total=e.total,this.users.length<e.total&&(this.users=this.users.concat(e.users)),this.canLoadMore=this.users.length<e.total}catch(e){throw this.loadMoreError=!0,e}finally{this.loaded=!0}}))}loadAttempts(e,t){return Object(h.a)(this,void 0,void 0,(function*(){try{yield this.loadGroupUsers(e)}catch(e){A.a.showErrorModalDefault(e,"core.course.errorgetmodule",!0)}finally{t&&t()}}))}refreshFeedback(e){return Object(h.a)(this,void 0,void 0,(function*(){try{const e=[];e.push(v.a.invalidateActivityGroupInfo(this.cmId)),this.feedback&&e.push(y.a.invalidateNonRespondentsData(this.feedback.id)),yield M.a.ignoreErrors(Promise.all(e)),yield this.fetchData(!0)}finally{e.complete()}}))}}return AddonModFeedbackNonRespondentsPage.ɵfac=function AddonModFeedbackNonRespondentsPage_Factory(e){return new(e||AddonModFeedbackNonRespondentsPage)},AddonModFeedbackNonRespondentsPage.ɵcmp=_.sc({type:AddonModFeedbackNonRespondentsPage,selectors:[["page-addon-mod-feedback-nonrespondents"]],decls:23,vars:23,consts:[["slot","start"],[3,"text"],["slot","fixed",3,"disabled","ionRefresh"],[3,"pullingText"],[3,"hideUntil"],[1,"ion-no-margin"],[3,"groupInfo","selected","courseId","selectedChange"],[4,"ngIf"],[3,"enabled","error","action"],["class","ion-text-wrap",4,"ngFor","ngForOf"],[1,"ion-text-wrap"],["slot","start",3,"user"],[1,"item-heading"],["color","success",4,"ngIf"],["color","danger",4,"ngIf"],["color","success"],["color","danger"]],template:function AddonModFeedbackNonRespondentsPage_Template(e,t){1&e&&(_.Ec(0,"ion-header"),_.Ec(1,"ion-toolbar"),_.Ec(2,"ion-buttons",0),_.zc(3,"ion-back-button",1),_.Pc(4,"translate"),_.Dc(),_.Ec(5,"ion-title"),_.Ec(6,"h1"),_.pd(7),_.Pc(8,"translate"),_.Dc(),_.Dc(),_.Dc(),_.Dc(),_.Ec(9,"ion-content"),_.Ec(10,"ion-refresher",2),_.Mc("ionRefresh",(function AddonModFeedbackNonRespondentsPage_Template_ion_refresher_ionRefresh_10_listener(e){return t.refreshFeedback(e.target)})),_.zc(11,"ion-refresher-content",3),_.Pc(12,"translate"),_.Dc(),_.Ec(13,"core-loading",4),_.Ec(14,"ion-list",5),_.Ec(15,"core-group-selector",6),_.Mc("selectedChange",(function AddonModFeedbackNonRespondentsPage_Template_core_group_selector_selectedChange_15_listener(e){return t.selectedGroup=e}))("selectedChange",(function AddonModFeedbackNonRespondentsPage_Template_core_group_selector_selectedChange_15_listener(){return t.loadAttempts(t.selectedGroup)})),_.Dc(),_.Ec(16,"ion-item-divider"),_.Ec(17,"ion-label"),_.Ec(18,"h2"),_.pd(19),_.Pc(20,"translate"),_.Dc(),_.Dc(),_.Dc(),_.nd(21,AddonModFeedbackNonRespondentsPage_ng_container_21_Template,2,1,"ng-container",7),_.Ec(22,"core-infinite-loading",8),_.Mc("action",(function AddonModFeedbackNonRespondentsPage_Template_core_infinite_loading_action_22_listener(e){return t.loadAttempts(void 0,e)})),_.Dc(),_.Dc(),_.Dc(),_.Dc()),2&e&&(_.lc(3),_.Vc("text",_.Qc(4,12,"core.back")),_.lc(4),_.qd(_.Qc(8,14,"addon.mod_feedback.responses")),_.lc(3),_.Vc("disabled",!t.loaded),_.lc(1),_.Wc("pullingText",_.Qc(12,16,"core.pulltorefresh")),_.lc(2),_.Vc("hideUntil",t.loaded),_.lc(2),_.Vc("groupInfo",t.groupInfo)("selected",t.selectedGroup)("courseId",t.courseId),_.lc(4),_.qd(_.Rc(20,18,"addon.mod_feedback.non_respondents_students",_.ad(21,nonrespondents_c0,t.total))),_.lc(2),_.Vc("ngIf",t.total>0),_.lc(1),_.Vc("enabled",t.canLoadMore)("error",t.loadMoreError))},directives:[s.C,s.Ab,s.m,s.h,s.i,s.yb,g.a,s.v,s.bb,s.cb,x.a,s.P,O.a,s.J,s.O,w.t,V.a,w.s,s.I,C.a,s.k],pipes:[p.d],encapsulation:2}),AddonModFeedbackNonRespondentsPage})();const re=[{path:":courseId/:cmId",component:u},{path:":courseId/:cmId/form",component:ae,canDeactivate:[ie.a]},{path:":courseId/:cmId/nonrespondents",component:de}],_e=[...re,{path:":courseId/:cmId/attempts",component:N},{path:":courseId/:cmId/attempts/:attemptId",component:B}],se=[...re,{path:":courseId/:cmId/attempts",component:N,children:[{path:":attemptId",component:B}]}],le=[...Object(S.c)(_e,(()=>q.a.isMobile)),...Object(S.c)(se,(()=>q.a.isTablet))];let me=(()=>{class AddonModFeedbackLazyModule{}return AddonModFeedbackLazyModule.ɵmod=_.wc({type:AddonModFeedbackLazyModule}),AddonModFeedbackLazyModule.ɵinj=_.vc({factory:function AddonModFeedbackLazyModule_Factory(e){return new(e||AddonModFeedbackLazyModule)},imports:[[o.m.forChild(le),c.a,a.a]]}),AddonModFeedbackLazyModule})();void(("undefined"==typeof ngJitMode||ngJitMode)&&_.kd(me,{declarations:[N,ae,u,de,B],imports:[o.m,c.a,a.a]}))},eoiU:function(e,t,n){"use strict";n.d(t,"a",(function(){return CoreSwipeNavigationItemsManager}));var o=n("mrSG"),c=n("pHTc"),a=n("CtbY");class CoreSwipeNavigationItemsManager extends a.a{start(){return Object(o.a)(this,void 0,void 0,(function*(){this.updateSelectedItem()}))}navigateToNextItem(){return Object(o.a)(this,void 0,void 0,(function*(){yield this.navigateToItemBy(1,"forward")}))}navigateToPreviousItem(){return Object(o.a)(this,void 0,void 0,(function*(){yield this.navigateToItemBy(-1,"back")}))}hasNextItem(){return Object(o.a)(this,void 0,void 0,(function*(){return!!(yield this.getItemBy(1))}))}hasPreviousItem(){return Object(o.a)(this,void 0,void 0,(function*(){return!!(yield this.getItemBy(-1))}))}getCurrentPageRoute(){return c.a.getCurrentRoute()}getSelectedItemPathFromRoute(e){const t=[];for(;e&&(t.push(...e.url),e.firstChild);)e=e.firstChild;return t.map((e=>e.path)).join("/").replace(/\/+/,"/").trim()||null}navigateToItemBy(e,t){return Object(o.a)(this,void 0,void 0,(function*(){const n=yield this.getItemBy(e);n&&(yield this.navigateToItem(n,{animationDirection:t,replace:!0}))}))}getItemBy(e){var t;return Object(o.a)(this,void 0,void 0,(function*(){const n=this.getSource().getItems(),o=null!==(t=this.selectedItem&&(null==n?void 0:n.indexOf(this.selectedItem)))&&void 0!==t?t:-1;if(-1===o||null===n)return null;const c=e>0?1:-1;let a=o,i=0;for(;i!==e;){if(a+=c,a<0)return null;if(a>=n.length)break;this.skipItemInSwipe(n[a])||(i+=c)}return i===e?n[a]:this.getSource().isCompleted()?null:(yield this.getSource().load(),this.getItemBy(e))}))}skipItemInSwipe(e){return!1}}}}]);